var drupalgap=drupalgap||drupalgap_init();
function drupalgap_init(){return{modules:{core:[{name:"block"},{name:"comment"},{name:"contact"},{name:"entity"},{name:"field"},{name:"file"},{name:"image"},{name:"menu"},{name:"mvc"},{name:"node"},{name:"search"},{name:"system"},{name:"taxonomy"},{name:"user"},{name:"views"}]},module_paths:[],includes:[{name:"common"},{name:"form"},{name:"menu"},{name:"theme"}],online:!1,destination:"",api:{},back:!1,back_path:[],blocks:[],content_types_list:{},date_formats:{},date_types:{},entity_info:{},field_info_fields:{},
field_info_instances:{},field_info_extra_fields:{},form_errors:{},form_states:[],loading:!1,loader:"loading",messages:[],menus:{},menu_links:{},menu_router:{},mvc:{models:{},views:{},controllers:{}},output:"",page:{jqm_events:[],title:"",variables:{},process:!0,options:{}},pages:[],path:"",remote_addr:null,router_path:"",services:{},sessid:null,settings:{},site_settings:{},taxonomy_vocabularies:!1,theme_path:"",themes:[],theme_registry:{},views:{ids:[]},views_datasource:{}}}
function drupalgap_onload(){try{for(var a="drupalgap block comment contact entity field file image menu mvc node search system taxonomy user views".split(" "),b=0;b<a.length;b++){var c=a[b];Drupal.modules.core[c]=module_object_template(c)}"undefined"===typeof drupalgap.settings.mode&&(drupalgap.settings.mode="phonegap");switch(drupalgap.settings.mode){case "phonegap":document.addEventListener("deviceready",_drupalgap_deviceready,!1);break;case "web-app":_drupalgap_deviceready();break;default:console.log("drupalgap_onload - unknown mode ("+
drupalgap.settings.mode+")")}}catch(d){console.log("drupalgap_onload - "+d)}}
function _drupalgap_deviceready(){try{if(drupalgap_bootstrap(),Drupal.settings.site_path&&""!=Drupal.settings.site_path)if(drupalgap_check_connection(),drupalgap.online){var a=!0,b=module_invoke_all("deviceready");if(b&&0<b.length)for(var c=0;c<b.length;c++)if(!b[c]){a=!1;break}a?system_connect({success:function(a){module_invoke_all("device_connected");drupalgap_goto("")},error:function(a,b,c){a="Failed connection to "+drupalgap.settings.site_path;""!=c&&(a+=" - "+c);a+=" - Check your device's connection and check that "+
Drupal.settings.site_path+" is online.";drupalgap_alert(a,{title:"Unable to Connect",alertCallback:function(){drupalgap_goto("offline")}})}}):drupalgap_goto("")}else module_invoke_all("device_offline"),drupalgap.settings.offline_message?drupalgap_alert(drupalgap.settings.offline_message,{title:"Offline",alertCallback:function(){drupalgap_goto("offline")}}):drupalgap_goto("offline");else drupalgap_alert("No site_path to Drupal set in the app/settings.js file!",{title:"Error"})}catch(d){console.log("_drupalgap_deviceready - "+
d)}}function drupalgap_bootstrap(){try{drupalgap_load_modules(),drupalgap_load_theme(),drupalgap_load_blocks(),menu_router_build(),drupalgap_menus_load(),drupalgap_theme_registry_build(),document.addEventListener("backbutton",drupalgap_back,!1)}catch(a){console.log("drupalgap_bootstrap - "+a)}}
function drupalgap_load_modules(){try{$.each(["contrib","custom"],function(a,c){drupalgap.modules&&drupalgap.modules[c]&&0!=drupalgap.modules[c].length&&$.each(drupalgap.modules[c],function(a,b){b.name&&(console.log('WARNING: The module "'+b.name+"\" defined in settings.js needs to be added to Drupal.modules['"+c+"'] instead! See default.settings.js for examples on the new syntax!"),Drupal.modules[c][b.name]=b)});$.each(Drupal.modules[c],function(a,b){$.isEmptyObject(b)&&(Drupal.modules[c][a]=module_object_template(a),
b=Drupal.modules[c][a]);b.name||(Drupal.modules[c][a].name=a,b=Drupal.modules[c][a]);module_base_path=drupalgap_modules_get_bundle_directory(c)+"/"+b.name;module_path=module_base_path+"/"+b.name+".js";modules_paths=[module_path];null!=b.includes&&0!=b.includes.length&&$.each(b.includes,function(a,b){modules_paths.push(module_base_path+"/"+b.name+".js")});$.each(modules_paths,function(a,c){jQuery.ajax({async:!1,type:"GET",url:c,data:null,success:function(){Drupal.settings.debug&&dpm(c)},dataType:"script",
error:function(a,d,e){a="Failed to load module! ("+b.name+")";dpm(a);dpm(c);dpm(d);dpm(e.message);drupalgap_alert(a)}})})})}),module_invoke_all("install")}catch(a){console.log("drupalgap_load_modules - "+a)}}
function drupalgap_load_theme(){try{if(drupalgap.settings.theme){var a=drupalgap.settings.theme,b="themes/"+a+"/"+a+".js";"easystreet3"!=a&&(b="app/themes/"+a+"/"+a+".js");if(!drupalgap_file_exists(b))return drupalgap_alert("drupalgap_theme_load - Failed to load theme! The theme's JS file does not exist: "+b),!1;drupalgap_add_js(b);var c=a+"_info";if(drupalgap_function_exists(c)){drupalgap.theme=(0,window[c])();$.each(drupalgap.theme.regions,function(a,b){drupalgap.theme.regions[a].name=a});for(var d=
system_regions_list(),c=0;c<d.length;c++){var f=d[c];"undefined"===typeof drupalgap.theme.regions[f]&&console.log('WARNING: drupalgap_load_theme() - The "'+a+'" theme does not have the "'+f+'" region specified in "'+a+'_info()."')}drupalgap.theme_path=b.replace("/"+a+".js","");return!0}drupalgap_alert("drupalgap_load_theme() - failed - "+c+"() does not exist!")}else drupalgap_alert("drupalgap_load_theme - no theme specified in settings.js");return!1}catch(e){console.log("drupalgap_load_theme - "+
e)}}function drupalgap_add_js(a){try{var b;a&&(b=a);jQuery.ajax({async:!1,type:"GET",url:b,data:null,success:function(){Drupal.settings.debug&&console.log(b)},dataType:"script",error:function(a,c,e){console.log("drupalgap_add_js - error - ("+b+" : "+c+") "+e)}})}catch(c){console.log("drupalgap_add_js - "+c)}}function drupalgap_add_css(a){try{var b;a&&(b=a);$("<link/>",{rel:"stylesheet",href:b}).appendTo("head")}catch(c){console.log("drupalgap_add_css - "+c)}}
function drupalgap_alert(a,b){try{var c=null;b&&(c=b);var d=function(){},f="Alert",e="OK";c&&(c.alertCallback&&(d=c.alertCallback),c.title&&(f=c.title),c.buttonName&&(e=c.buttonName));"phonegap"!=drupalgap.settings.mode||"undefined"===typeof navigator.notification?(alert(a),d()):navigator.notification.alert(a,d,f,e)}catch(g){console.log("drupalgap_alert - "+g)}}
function drupalgap_confirm(a,b){try{var c=null;b&&(c=b);var d=function(a){},f="Confirm",e=["OK","Cancel"];c&&(c.confirmCallback&&(d=c.confirmCallback),c.title&&(f=c.title),c.buttonLabels&&(e=c.buttonLabels));"function"===typeof parent.window.ripple?confirm(a)&&d():navigator.notification.confirm(a,d,f,e);return!1}catch(g){console.log("drupalgap_confirm - "+g)}}function drupalgap_load_blocks(){try{drupalgap.blocks=module_invoke_all("block_info")}catch(a){console.log("drupalgap_load_blocks - "+a)}}
function drupalgap_check_connection(){try{if("phonegap"!=drupalgap.settings.mode||"function"===typeof parent.window.ripple)return drupalgap.online=!0,"Ethernet connection";var a=navigator.connection.type,b={};b[Connection.UNKNOWN]="Unknown connection";b[Connection.ETHERNET]="Ethernet connection";b[Connection.WIFI]="WiFi connection";b[Connection.CELL_2G]="Cell 2G connection";b[Connection.CELL_3G]="Cell 3G connection";b[Connection.CELL_4G]="Cell 4G connection";b[Connection.NONE]="No network connection";
drupalgap.online="No network connection"==b[a]?!1:!0;return b[a]}catch(c){console.log("drupalgap_check_connection - "+c)}}function drupalgap_empty(a){try{return console.log("WARNING: drupalgap_empty() is deprecated! Use empty() instead."),empty(a)}catch(b){console.log("drupalgap_empty - "+b)}}function drupalgap_file_exists(a){try{var b=!1;jQuery.ajax({async:!1,type:"HEAD",url:a,success:function(){b=!0},error:function(a,b,c){}});return b}catch(c){console.log("drupalgap_file_exists - "+c)}}
function drupalgap_file_get_contents(a,b){try{var c=!1,d={type:"GET",url:a,dataType:"html",data:null,async:!1,success:function(a){c=a},error:function(b,c,d){console.log("drupalgap_file_get_contents - failed to load file ("+a+")")}};$.extend(d,b);jQuery.ajax(d);return c}catch(f){console.log("drupalgap_file_get_contents - "+f)}}
function drupalgap_format_interval(a,b,c){try{var d=2;b&&(d=b);var f="";$.each({"1 year|@count years":31536E3,"1 month|@count months":2592E3,"1 week|@count weeks":604800,"1 day|@count days":86400,"1 hour|@count hours":3600,"1 min|@count min":60,"1 sec|@count sec":1},function(b,c){b=b.split("|");if(a>=c){var e=Math.floor(a/c);f+=(f?" ":"")+drupalgap_format_plural(e,b[0],b[1]);-1!=f.indexOf("@count")&&(f=f.replace("@count",e));a%=c;d--}if(0==d)return!1});return f?f:"0 sec"}catch(e){console.log("drupalgap_format_interval - "+
e)}}function drupalgap_format_plural(a,b,c){return 1==a?b:c}function drupalgap_function_exists(a){try{return function_exists(a)}catch(b){console.log("drupalgap_function_exists - "+b)}}function drupalgap_get_placeholders_from_html(a){try{var b=!1;a&&(b=a.match(/(?!{:)([\w]+)(?=:})/g));return b}catch(c){console.log("drupalgap_get_placeholders_from_html - "+c)}}function drupalgap_get_title(){try{return drupalgap.page.title}catch(a){console.log("drupalgap_get_title - "+a)}}
function drupalgap_get_ip(){try{return drupalgap.remote_addr}catch(a){console.log("drupalgap_get_ip - "+a)}}function drupalgap_get_wildcards_from_router_path(a){return!1}
function drupalgap_image_path(a){try{var b=!1,c=module_implements("image_path_alter");c&&$.each(c,function(c,d){var f=module_invoke(d,"image_path_alter",a);if(f)return b=!0,a=f,!1});if(b)return a;var d=Drupal.settings.site_path+Drupal.settings.base_path+a;-1!=d.indexOf("public://")?d=d.replace("public://",Drupal.settings.file_public_path+"/"):-1!=d.indexOf("private://")&&(d=d.replace("private://",Drupal.settings.file_private_path+"/"));return d}catch(f){console.log("drupalgap_image_path - "+f)}}
function drupalgap_includes_load(){try{null!=drupalgap.includes&&0!=drupalgap.includes.length&&$.each(drupalgap.includes,function(a,c){var d="includes/"+c.name+".inc.js";jQuery.ajax({async:!1,type:"GET",url:d,data:null,success:function(){Drupal.settings.debug&&dpm(d)},dataType:"script",error:function(a,b,c){console.log(c)}})})}catch(a){console.log("drupalgap_includes_load - "+a)}}
function drupalgap_item_list_populate(a,b){try{$(a).html("");for(var c=0;c<b.length;c++)$(a).append($("<li></li>",{html:b[c]}));$(a).listview("refresh").listview()}catch(d){console.log("drupalgap_item_list_populate - "+d)}}function drupalgap_table_populate(a,b){try{a+="> tbody ";$(a).html("");for(var c=0;c<b.length;c++){for(var d=b[c],f="",e=0;e<d.length;e++)f=f+"<td>"+d[e]+"</td>";$("<tr>").html(f).appendTo($(a))}$(a).rebuild()}catch(g){console.log("drupalgap_table_populate - "+g)}}
function drupalgap_jqm_page_event_fire(a,b,c,d){try{if(a=a+"-"+b,"undefined"!==typeof d&&d&&(a+="-"+d),-1==$.inArray(a,drupalgap.page.jqm_events)&&drupalgap_function_exists(b)){drupalgap.page.jqm_events.push(a);var f=window[b];c?($.isArray(c)||(c=[c]),f.apply(null,Array.prototype.slice.call(c))):f()}}catch(e){console.log("drupalgap_jqm_page_event_fire - "+e)}}
function drupalgap_jqm_page_events(){return"pagebeforechange pagebeforecreate pagebeforehide pagebeforeload pagebeforeshow pagechange pagechangefailed pagecreate pagehide pageinit pageload pageloadfailed pageremove pageshow".split(" ")}
function drupalgap_jqm_page_event_script_code(a,b){try{var c='"'+a.jqm_page_event+'", "'+a.jqm_page_event_callback+'", '+a.jqm_page_event_args;b&&(c+=', "'+b+'"');return'<script type="text/javascript">$("#'+a.page_id+'").on("'+a.jqm_page_event+'", drupalgap_jqm_page_event_fire('+c+"));\x3c/script>"}catch(d){console.log("drupalgap_jqm_page_event_script_code - "+d)}}
function drupalgap_loading_message_show(a){try{if("undefined"===drupalgap.loading&&(drupalgap.loading=!1),!drupalgap.loading){var b=drupalgap_loader_options();a&&(b=a);setTimeout(function(){$.mobile.loading("show",b);drupalgap.loading=!0},1)}}catch(c){console.log("drupalgap_loading_message_show - "+c)}}
function drupalgap_loading_message_hide(){try{setTimeout(function(){$.mobile.loading("hide");drupalgap.loading=!1;drupalgap.loader="loading"},100)}catch(a){console.log("drupalgap_loading_message_hide - "+a)}}function drupalgap_loader_options(){try{var a=drupalgap.loader,b="Loading...";"saving"==a&&(b="Saving...");b={text:b,textVisible:!0};drupalgap.settings.loader&&drupalgap.settings.loader[a]&&(b=drupalgap.settings.loader[a]);return b}catch(c){console.log(" - "+c)}}
function drupalgap_max_width(){try{var a=parseInt($(".ui-content").css("padding"));isNaN(a)&&(a=16);return $(document).width()-2*a}catch(b){console.log("drupalgap_max_width - "+b)}}
function drupalgap_menu_access(a,b,c){try{if(1==Drupal.user.uid)return!0;var d=!1;if(drupalgap.menu_links[a])if("undefined"===typeof drupalgap.menu_links[a].access_callback)drupalgap.menu_links[a].access_arguments?$.isArray(drupalgap.menu_links[a].access_arguments)&&$.each(drupalgap.menu_links[a].access_arguments,function(a,b){if(d=user_access(b))return!1}):d=!0;else{var f=drupalgap.menu_links[a].access_callback;if(drupalgap_function_exists(f)){var e=window[f];if(drupalgap.menu_links[a].access_arguments){var g=
drupalgap.menu_links[a].access_arguments.slice(0);c&&$.each(g,function(a,b){if(is_int(parseInt(b)))return g[a]=c,!1});return e.apply(null,Array.prototype.slice.call(g))}return e()}console.log("drupalgap_menu_access - access call back ("+f+") does not exist")}else console.log("drupalgap_menu_access - path ("+a+") does not exist");return d}catch(h){console.log("drupalgap_menu_access - "+h)}}
function drupalgap_module_load(a){try{return module_load(a)}catch(b){console.log("drupalgap_module_load - "+b)}}function drupalgap_modules_get_bundle_directory(a){try{return dir="","core"==a?dir="modules":"contrib"==a?dir="app/modules":"custom"==a&&(dir="app/modules/custom"),dir}catch(b){console.log("drupalgap_modules_get_bundle_directory - "+b)}}
function drupalgap_place_args_in_path(a,b){try{var c=!1;if(a){var d=drupalgap_path_get();b&&(d=b);var f=arg(null,d),e,g=arg(null,a);g&&0<g.length&&($.each(g,function(a,b){"%"==b&&(e||(e=[]),e.push(a))}),e&&0<e.length&&($.each(e,function(a,b){f[b]&&(g[b]=f[b])}),c=g.join("/")))}return c}catch(h){console.log("drupalgap_place_args_in_path - "+h)}}
function drupalgap_path_has_entity_arg(a){try{return 1<a.length&&("comment"==a[0]||"file"==a[0]||"node"==a[0]||"taxonomy"==a[0]&&("vocabulary"==a[1]||"term"==a[1])||"user"==a[0]||"item"==a[0])?!0:!1}catch(b){console.log("drupalgap_path_has_entity_arg - "+b)}}function drupalgap_remove_page_from_dom(a){try{$("#"+a).empty().remove()}catch(b){console.log("drupalgap_remove_page_from_dom - "+b)}}
function drupalgap_set_message(a,b){try{if(!empty(a)){var c="status";b&&(c=b);drupalgap.messages.push({message:a,type:c})}}catch(d){console.log("drupalgap_set_message - "+d)}}function drupalgap_clear_messages(a){try{empty(a)&&(a=drupalgap_get_page_id()),$("#"+a+" div.messages").remove()}catch(b){console.log("drupalgap_clear_messages - "+b)}}function drupalgap_set_title(a){try{a&&(drupalgap.page.title=a)}catch(b){console.log("drupalgap_set_title - "+b)}}
function drupalgap_services_preprocess(a){try{drupalgap_loading_message_show()}catch(b){console.log("drupalgap_services_preprocess - "+b)}}function drupalgap_services_postprocess(a,b){try{drupalgap_loading_message_hide()}catch(c){console.log("drupalgap_services_postprocess - "+c)}}
function drupalgap_services_request_pre_postprocess_alter(a,b){try{if("system"==a.service&&"connect"==a.resource)drupalgap.remote_addr=b.remote_addr,drupalgap.entity_info=b.entity_info,drupalgap.field_info_instances=b.field_info_instances,drupalgap.field_info_fields=b.field_info_fields,drupalgap.field_info_extra_fields=b.field_info_extra_fields,drupalgap.taxonomy_vocabularies=drupalgap_taxonomy_vocabularies_extract(b.taxonomy_vocabularies),drupalgap_service_resource_extract_results({service:a.service,
resource:a.resource,data:b});else if("user"==a.service&&("logout"==a.resource||"login"==a.resource||"register"==a.resource))drupalgap_remove_pages_from_dom();else if(in_array(a.resource,["create","update","delete"])&&in_array(a.service,entity_types())){var c=a.entity_type,d=a.entity_id,f=a.bundle||null,e=[];if("create"!=a.resource)f=c,in_array(c,["taxonomy_vocabulary","taxonomy_term"])&&(f=f.replace("_","/",f)),e.push(f+"/"+d),e.push(f+"/"+d+"/view"),e.push(f+"/"+d+"/edit");else switch(c){case "node":e.push("node/add/"+
f)}switch(c){case "node":e.push("node");break;case "taxonomy_vocabulary":e.push("taxonomy/vocabularies");break;case "user":e.push("user-listing")}var g=[];$.each(e,function(a,b){g.push(drupalgap_get_page_id(b))});$.each(g,function(a,b){drupalgap_remove_page_from_dom(b)})}}catch(h){console.log("drupalgap_services_request_pre_postprocess_alter - "+h)}}
function drupalgap_settings_load(){try{console.log("WARNING: drupalgap_settings_load() is deprecated!")}catch(a){console.log("drupalgap_settings_load - "+a)}}function drupalgap_theme_registry_build(){try{var a=module_implements("theme");$.each(a,function(a,b){var f=(0,window[b+"_theme"])();$.each(f,function(a,b){b.path=drupalgap_get_path("theme",drupalgap.settings.theme);drupalgap.theme_registry[a]=b})})}catch(b){console.log("drupalgap_theme_registry_build - "+b)}}
function variable_set(a,b){try{return b?is_int(b)?b=b.toString():"object"===typeof b&&(b=JSON.stringify(b)):b=" ",window.localStorage.setItem(a,b)}catch(c){drupalgap_error(c)}}function variable_get(a,b){try{var c=window.localStorage.getItem(a);c||(c=b);" "==c&&(c="");return c}catch(d){drupalgap_error(d)}}function variable_del(a){try{return window.localStorage.removeItem(a)}catch(b){drupalgap_error(b)}}
function date_yyyy_mm_dd_hh_mm_ss(a){try{var b;b=a?a:date_yyyy_mm_dd_hh_mm_ss_parts();return b.year+"-"+b.month+"-"+b.day+" "+b.hour+":"+b.minute+":"+b.second}catch(c){console.log("date_yyyy_mm_dd_hh_mm_ss - "+c)}}
function date_yyyy_mm_dd_hh_mm_ss_parts(a){try{var b=[],c=null,c=a?a:new Date,d=""+c.getFullYear(),f=""+(c.getMonth()+1);1==f.length&&(f="0"+f);var e=""+c.getDate();1==e.length&&(e="0"+e);var g=""+c.getHours();1==g.length&&(g="0"+g);var h=""+c.getMinutes();1==h.length&&(h="0"+h);var k=""+c.getSeconds();1==k.length&&(k="0"+k);b.year=d;b.month=f;b.day=e;b.hour=g;b.minute=h;b.second=k;return b}catch(m){console.log("date_yyyy_mm_dd_hh_mm_ss_parts - "+m)}}
function date_number_of_days_in_month(a,b){try{return(new Date(a,b,0)).getDate()}catch(c){console.log("date_number_of_days_in_month - "+c)}}function scrollToElement(a,b,c){try{b="undefined"!=typeof b?b:1E3,c="undefined"!=typeof c?c:0,element=$(a),offset=element.offset(),offsetTop=offset.top+c,$("html, body").animate({scrollTop:offsetTop},b)}catch(d){console.log("scrollToElement - "+d)}}
function drupalgap_add_page_to_dom(a){try{var b={id:a.page_id,"data-role":"page"},b=$.extend(!0,b,a.menu_link.options.attributes);b["class"]+=" "+drupalgap_page_class_get(drupalgap.router_path);a.html=a.html.replace(/{:drupalgap_page_attributes:}/g,drupalgap_attributes(b));$("body").append(a.html);drupalgap.pages.push(a.page_id)}catch(c){console.log("drupalgap_add_page_to_dom - "+c)}}
function drupalgap_remove_page_from_dom(a,b){try{var c=drupalgap_get_page_id(drupalgap_path_get()),d={};b&&(d=b);c!=a||d.force?($("#"+a).empty().remove(),delete drupalgap.pages[a]):console.log("WARNING: drupalgap_remove_page_from_dom() - not removing the current page ("+a+") from the DOM!")}catch(f){console.log("drupalgap_remove_page_from_dom - "+f)}}
function drupalgap_remove_pages_from_dom(){try{var a=drupalgap_get_page_id(drupalgap_path_get());$.each(drupalgap.pages,function(b,d){a!=d&&$("#"+d).empty().remove()});drupalgap.pages=[a];drupalgap.views.ids=[]}catch(b){console.log("drupalgap_remove_pages_from_dom - "+b)}}function drupalgap_attributes(a){try{var b="";a&&$.each(a,function(a,c){b=""!=c?b+(a+'="'+c+'" '):b+(a+" ")});return b}catch(c){console.log("drupalgap_attributes - "+c)}}
function drupalgap_check_visibility(a,b){try{var c=!0;if("undefined"===typeof b)console.log("drupalgap_check_visibility - WARNING - no data provided for type ("+a+")");else if("undefined"!==typeof b.roles&&b.roles&&b.roles.value&&0!=b.roles.value.length)$.each(b.roles.value,function(a,d){drupalgap_user_has_role(d)?("include"==b.roles.mode&&(c=!0),"exclude"==b.roles.mode&&(c=!1)):("include"==b.roles.mode&&(c=!1),"exclude"==b.roles.mode&&(c=!0));if(c)return!1});else if("undefined"!==typeof b.pages&&
b.pages&&b.pages.value&&0!=b.pages.value.length){var d=drupalgap_path_get(),f=d.split("/");$.each(b.pages.value,function(a,e){""==e&&(e=drupalgap.settings.front);if(e==d)return"include"==b.pages.mode?c=!0:"exclude"==b.pages.mode&&(c=!1),!1;if(-1!=e.indexOf("*")){if(drupalgap_get_menu_link_router_path(d).replace(/%/g,"*")==e)return"include"==b.pages.mode?c=!0:"exclude"==b.pages.mode&&(c=!1),!1;var k=e.split("/"),m=!0;if(0==k.length)m=!1;else if(k.length==f.length)for(var n=0;n<k.length;n++)if(k[n]!=
f[n]){m=!1;break}"include"==b.pages.mode?c=!1:"exclude"==b.pages.mode&&(c=!0);m||(c=!c)}else"include"==b.pages.mode?c=!1:"exclude"==b.pages.mode&&(c=!0)})}return c}catch(e){console.log("drupalgap_check_visibility - "+e)}}
function drupalgap_get_bundle(a,b){try{var c=null;switch(a){case "node":c=b.type;break;case "comment":case "file":case "user":case "taxonomy_vocabulary":case "taxonomy_term":break;default:console.log("WARNING: drupalgap_get_bundle - unsupported entity type ("+a+")")}return c}catch(d){console.log("drupalgap_get_bundle - "+d)}}
function drupalgap_get_page_id(a){try{return a||(a=drupalgap_path_get()),a.toLowerCase().replace(/\//g,"_").replace(/-/g,"_")}catch(b){console.log("drupalgap_get_page_id - "+b)}}
function drupalgap_get_path(a,b){try{var c=null;if("module"==a){var d=!1;$.each(Drupal.modules,function(a,f){if(d)return!1;$.each(f,function(f,g){if(g.name==b){d=!0;c="";if("core"==a)c+="modules";else if("contrib"==a)c+="app/modules";else if("custom"==a)c+="app/modules/custom";else return drupalgap_alert("drupalgap_get_path - unknown module bundle ("+a+")"),!1;c+="/"+b;return!1}})})}else"theme"==a?c="easystreet3"==b?"themes/"+b:"app/themes/"+b:console.log("WARNING: drupalgap_get_path - unsupported type ("+
a+")");return c}catch(f){console.log("drupalgap_get_path - "+f)}}function drupalgap_back(){try{if($(".ui-page-active").attr("id")==drupalgap.settings.front){var a="Exit "+drupalgap.settings.title+"?";drupalgap.settings.exit_message&&(a=drupalgap.settings.exit_message);drupalgap_confirm(a,{confirmCallback:_drupalgap_back_exit})}else _drupalgap_back()}catch(b){console.log("drupalgap_back"+b)}}
function _drupalgap_back(){try{drupalgap.back=!0,history.back(),drupalgap_path_set(drupalgap.back_path.pop())}catch(a){console.log("drupalgap_back"+a)}}function _drupalgap_back_exit(a){try{1===a?navigator.app.exitApp():""}catch(b){console.log("_drupalgap_back_exit - "+b)}}
function drupalgap_error(a){try{var b="drupalgap_error() - "+arguments.callee.caller.name+" - "+a;dpm(b);Drupal.settings.debug&&drupalgap_alert(b);arguments[1]&&drupalgap_alert(arguments[1]);"error"!=drupalgap_path_get()&&drupalgap_goto("error")}catch(c){console.log("drupalgap_error - "+c)}}
function drupalgap_goto(a,b){try{var c={};b&&(c=b,"undefined"===typeof c.form_submission&&(c.form_submission=!1));drupalgap.page.options=c;a=drupalgap_goto_prepare_path(a);if(!a)return!1;module_invoke_all("drupalgap_goto_preprocess",a);var d=drupalgap_get_menu_link_router_path(a);if(!drupalgap.menu_links[d]){var f=!1,e=module_invoke_all("404",d);e&&$.each(e,function(a,b){if(!1!==b)return f=b,!1});a=f?f:"404";d=drupalgap_get_menu_link_router_path(a)}"MENU_DEFAULT_LOCAL_TASK"==drupalgap.menu_links[d].type||
"MENU_LOCAL_TASK"==drupalgap.menu_links[d].type||drupalgap_menu_access(d)||(a="401",d=drupalgap_get_menu_link_router_path(a));if(d==drupalgap_router_path_get()&&drupalgap_path_get()==a&&!c.form_submission)return!1;var g=drupalgap_get_page_id(a);if(drupalgap_jqm_active_page_url()==g&&c.form_submission)return drupalgap_clear_messages(),!1;drupalgap.back_path.push(drupalgap_path_get());drupalgap_path_set(a);drupalgap_router_path_set(d);if(drupalgap_page_in_dom(g))if(drupalgap.menu_links[d].options&&
(c=$.extend({},drupalgap.menu_links[d].options,c)),"undefined"!==typeof c.reloadPage&&c.reloadPage)drupalgap_remove_page_from_dom(g,{force:!0}),delete c.reloadPage,c.reloadingPage=!0;else{if(!c.form_submission){drupalgap_clear_messages();drupalgap.page.process=!1;$.mobile.changePage("#"+g,c);module_invoke_all("drupalgap_goto_post_process",a);return}}else"undefined"!==typeof c.reloadPage&&c.reloadPage&&delete c.reloadPage;drupalgap_goto_generate_page_and_go(a,g,c,drupalgap.menu_links[d])}catch(h){console.log("drupalgap_goto - "+
h)}}
function drupalgap_goto_generate_page_and_go(a,b,c,d){try{var f=path_to_theme()+"/page.tpl.html";if(drupalgap_file_exists(f)){"undefined"===typeof c&&(c={});var e={};drupalgap.settings.cache&&"undefined"!==drupalgap.settings.cache.theme_registry&&!drupalgap.settings.cache.theme_registry&&(e.cache=!1);var g=drupalgap_file_get_contents(f,e);if(g){drupalgap_add_page_to_dom({page_id:b,html:g,menu_link:d});drupalgap_path_get()==a&&c.form_submission&&(c.allowSamePageTransition=!0);d="index.html#"+b;if("phonegap"!=
drupalgap.settings.mode||"function"===typeof parent.window.ripple)d="#"+b;$.mobile.changePage(d,c);module_invoke_all("drupalgap_goto_post_process",a)}else drupalgap_alert("drupalgap_goto_generate_page_and_go - failed to load theme's page.tpl.html file")}else console.log("drupalgap_goto_generate_page_and_go - page template does not exist! ("+f+")")}catch(h){console.log("drupalgap_goto_generate_page_and_go - "+h)}}
function drupalgap_goto_prepare_path(a){try{if(""==a)if(drupalgap.settings.front)a=drupalgap.settings.front;else return drupalgap_alert("drupalgap_goto_prepare_path - no front page specified in settings.js!"),!1;else"user"==a&&(a=0!=Drupal.user.uid?"user/"+Drupal.user.uid:"user/login");return a}catch(b){console.log("drupalgap_goto_prepare_path - "+b)}}
function drupalgap_link_get_class(a){try{var b=null;a.options&&a.options.attributes&&a.options.attributes["class"]&&!empty(a.options.attributes["class"])&&(b=a.options.attributes["class"]);return b}catch(c){console.log("drupalgap_link_get_class - "+c)}}function drupalgap_page_class_get(a){try{for(var b=a.replace(/[\/%]/g,"_");b.lastIndexOf("_")==b.length-1;)b=b.substr(0,b.length-1);return b}catch(c){console.log("drupalgap_page_class_get - "+c)}}
function drupalgap_page_in_dom(a){try{var b=$("body div[data-role$='page']"),c=!1;b&&0<b.length&&$.each(b,function(b,d){if($(d).attr("id")==a)return c=!0,!1});return c}catch(d){console.log("drupalgap_page_in_dom - "+d)}}function drupalgap_jqm_active_page_url(){try{return $.mobile.activePage?$.mobile.activePage.data("url"):""}catch(a){console.log("drupalgap_jqm_active_page_url - "+a)}}function drupalgap_path_get(){try{return drupalgap.path}catch(a){console.log("drupalgap_path_get - "+a)}}
function drupalgap_path_set(a){try{drupalgap.path=a}catch(b){console.log("drupalgap_path_set - "+b)}}function drupalgap_router_path_get(){try{return drupalgap.router_path}catch(a){console.log("drupalgap_router_path_get - "+a)}}function drupalgap_router_path_set(a){try{drupalgap.router_path=a}catch(b){console.log("drupalgap_router_path_set - "+b)}}
function drupalgap_render_page(){try{var a=drupalgap.output,b=$.type(a),c="";if("string"===b)c=a;else if("object"===b){var d=["theme","view_mode","language"];if(a.theme&&drupalgap.theme_registry[a.theme]){var f=drupalgap.theme_registry[a.theme],e=a.theme.replace(/_/g,"-")+".tpl.html",g=f.path+"/"+e;if(drupalgap_file_exists(g)){var h=drupalgap_file_get_contents(g);if(h){var k=drupalgap_get_placeholders_from_html(h);k&&$.each(k,function(b,c){var d="";if(a[c]){var e=a[c];a[c].markup?d=a[c].markup:a[c].theme&&
(d=theme(a[c].theme,e));delete a[c]}h=h.replace("{:"+c+":}",d)});c+=h}else console.log("drupalgap_render_page - failed to get file contents ("+g+")")}else console.log("drupalgap_render_page - template file does not exist ("+g+")")}$.each(a,function(a,b){-1==$.inArray(a,d)&&(c+=theme(b.theme,b))})}return c}catch(m){console.log("drupalgap_render_page - "+m)}}
function drupalgap_render_region(a){try{if(!drupalgap.settings.blocks[drupalgap.settings.theme])return console.log('WARNING: drupalgap_render_region() - there are no blocks for the "'+drupalgap.settings.theme+'" theme in the settings.js file!'),"";var b=drupalgap_path_get(),c="";if(drupalgap.settings.blocks[drupalgap.settings.theme][a.name]){a.attributes["class"]||(a.attributes["class"]="");a.attributes["class"]+=" region_"+a.name+" ";var c=c+("<div "+drupalgap_attributes(a.attributes)+">"),d=0,f=
0;if(a.links&&0<a.links.length){var e=0,g=0;$.each(a.links,function(a,b){var c=menu_region_link_get_data(b);drupalgap_check_visibility("region",c)&&(d++,c=drupalgap_link_get_class(b))&&(c=menu_region_link_get_side(c),"left"==c?e++:"right"==c&&g++)});for(var h="",k="",m=0;m<a.links.length;m++){var n=a.links[m],p=menu_region_link_get_data(n);if(drupalgap_check_visibility("region",p)&&!in_array(b,["offline","error","user/logout"])){var q=n.title,r=n.path;p.options.popup?(f++,q&&!empty(q)||"undefined"!==
typeof p.options.attributes["data-iconpos"]||(p.options.attributes["data-iconpos"]="notext"),"undefined"===typeof p.options.attributes["data-rel"]&&(p.options.attributes["data-rel"]="popup"),"undefined"===typeof p.options.attributes["data-icon"]&&(p.options.attributes["data-icon"]="bars"),"undefined"===typeof p.options.attributes["data-role"]&&(p.options.attributes["data-role"]="button"),r=null,p.options.attributes.href="#"+menu_container_id(p.options.popup_delta)):"undefined"===typeof p.options.attributes["data-role"]&&
(p.options.attributes["data-role"]="button");"notext"==p.options.attributes["data-iconpos"]&&(q="&nbsp;");var s=drupalgap_link_get_class(n),t=menu_region_link_get_side(s),u=l(q,r,p.options);"left"==t?h+=u:"right"==t&&(k+=u)}}if(1<e)var w={"data-type":"horizontal","data-role":"controlgroup","class":"ui-btn-left"},h="<div "+drupalgap_attributes(w)+">"+h.replace(/ui-btn-left/g,"")+"</div>";1<g&&(w={"data-type":"horizontal","data-role":"controlgroup","class":"ui-btn-right"},k="<div "+drupalgap_attributes(w)+
">"+k.replace(/ui-btn-right/g,"")+"</div>");c+=h+k}var v=0,x=0;$.each(drupalgap.settings.blocks[drupalgap.settings.theme][a.name],function(d,e){var f=!1;e.access_callback&&drupalgap_function_exists(e.access_callback)?f=(0,window[e.access_callback])({path:b,delta:d,region:a.name,theme:drupalgap.settings.theme,settings:e}):drupalgap_check_visibility("block",e)&&(f=!0,"main"==d||"offline"!=b&&"error"!=b||(f=!1));f&&(f=drupalgap_block_load(d),v++,menu_load(d)&&x++,f&&(c+=module_invoke(f.module,"block_view",
d,a)))});if(in_array(a.attributes["data-role"],["header","footer"])&&(0==v&&0<d||0==v-x)||0<d&&f>=x&&0==v)c+="<h2>&nbsp;</h2>";c+="</div>\x3c!-- "+a.name+" --\x3e"}return c}catch(y){console.log("drupalgap_render_region - "+y)}}
function _drupalgap_page_title_pageshow(a){try{var b=drupalgap_router_path_get(),c=[];"undefined"!==typeof drupalgap.menu_links[b].title&&drupalgap_set_title(drupalgap.menu_links[b].title);if("undefined"!==typeof drupalgap.menu_links[b].title_callback){var d=drupalgap.menu_links[b].title_callback;if(drupalgap_function_exists(d)){var f=window[d];c.unshift(_drupalgap_page_title_pageshow_success);if(drupalgap.menu_links[b].title_arguments){var e=arg(null,drupalgap_path_get());$.each(drupalgap.menu_links[b].title_arguments,
function(a,b){is_int(b)&&e[b]?c.push(e[b]):c.push(b)})}drupalgap_set_title(f.apply(null,Array.prototype.slice.call(c)))}}else _drupalgap_page_title_pageshow_success(drupalgap_get_title())}catch(g){console.log("_drupalgap_page_title_pageshow - "+g)}}function _drupalgap_page_title_pageshow_success(a){try{var b=system_title_block_id(drupalgap_path_get());$("h1#"+b).html(a)}catch(c){console.log("_drupalgap_page_title_pageshow_success - "+c)}}
function arg(){try{var a=null;if(0==arguments.length||1==arguments.length){var b=drupalgap_path_get().split("/");0==arguments.length?a=b:b[arguments[0]]&&(a=b[arguments[0]])}else b=arguments[1].split("/"),a=arguments[0]&&b[arguments[0]]?b[arguments[0]]:b;return a}catch(c){console.log("arg - "+c)}}function l(a,b,c){try{return a={text:a,path:b},b=null,c&&(b=c,b.attributes&&(a.attributes=b.attributes),a.options=b),theme("link",a)}catch(d){console.log("l - "+d)}}
function bl(a,b,c){try{var d=null,d=c?c:{};d.attributes||(d.attributes={});d.attributes["data-role"]="button";return l(a,b,d)}catch(f){console.log("bl - "+f)}}
function _drupalgap_form_add_another_item(a,b,c){try{var d="."+drupalgap_form_get_element_container_class(b)+" .drupalgap_form_add_another_item",f=$(d),e=drupalgap_form_local_storage_load(a),g=language_default(),h=drupalgap_form_element_item_create(b,e,g,c+1);e.elements[b][g][c+1]=h;var k=e.elements[b],m={attributes:{},field_info_field:k.field_info_field,field_info_instance:k.field_info_instance};window[k.field_info_instance.widget.module+"_field_widget_form"].apply(null,_drupalgap_form_element_items_widget_arguments(e,
null,k,g,c+1));drupalgap_form_local_storage_save(e);$(f).before(_drupalgap_form_render_element_item(e,k,m,h))}catch(n){console.log("_drupalgap_form_add_another_item - "+n)}}function drupalgap_form_cancel_button(){return{title:"Cancel",attributes:{onclick:"javascript:drupalgap_back();"}}}function drupalgap_form_clear(a){try{$(":input",a).not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}catch(b){console.log("drupalgap_form_clear - "+b)}}
function drupalgap_form_defaults(a){try{var b={};b.id=a;b.elements={};b.buttons={};b.options={attributes:{"class":""}};b.prefix="";b.suffix="";b.validate=[];b.submit=[];var c=b.id+"_validate";drupalgap_function_exists(c)&&b.validate.push(c);var d=b.id+"_submit";drupalgap_function_exists(d)&&b.submit.push(d);return b}catch(f){console.log("drupalgap_form_defaults - "+f)}}
function drupalgap_form_element_access(a){try{var b=!0;0==a.access&&(b=!1);return b}catch(c){console.log("drupalgap_form_element_access - "+c)}}function drupalgap_form_element_get_module_name(a){try{var b=!1;switch(a){case "checkbox":case "radios":case "select":b="options";break;case "image":b="image"}return b}catch(c){console.log("drupalgap_form_element_get_module_name - "+c)}}
function drupalgap_form_get_element_id(a,b,c,d){try{if(null==a||""==a)return"";var f="edit-"+b.toLowerCase().replace(/_/g,"-")+"-"+a.toLowerCase().replace(/_/g,"-");c&&(f+="-"+c);"undefined"!==typeof d&&(f+="-"+d+"-value");return f}catch(e){console.log("drupalgap_form_get_element_id - "+e)}}function drupalgap_form_get_element_container_class(a){try{return"form-item field-name-"+a.replace(/_/g,"-")}catch(b){console.log("drupalgap_form_get_element_container_class - "+b)}}
function drupalgap_form_render(a){try{if(!a.id)return"<p>drupalgap_form_render() - missing form id!</p>"+JSON.stringify(a);$("form#"+a.id).length&&$("form#"+a.id).remove();var b=a.prefix;empty(b)||(b='<div class="form_prefix">'+b+"</div>");var c=a.suffix;empty(c)||(c='<div class="form_suffix">'+c+"</div>");var d=_drupalgap_form_render_elements(a),f=drupalgap_attributes(a.options.attributes);return'<form id="'+a.id+'" '+f+">"+b+'<div id="drupalgap_form_errors"></div>'+d+c+"</form>"}catch(e){console.log("drupalgap_form_render - "+
e)}}function drupalgap_form_set_error(a,b){try{drupalgap.form_errors[a]=b}catch(c){console.log("drupalgap_form_set_error - "+c)}}
function drupalgap_form_state_values_assemble(a){try{var b=language_default(),c={values:{}};$.each(a.elements,function(d,e){if("submit"!=d){var g=null;if(e.is_field){c.values[d]={};c.values[d][b]={};var h=e.field_info_field.cardinality;-1==h&&(h=1);for(var k=0;k<h;k++)g=drupalgap_form_get_element_id(d,a.id,b,k),c.values[d][b][k]=_drupalgap_form_state_values_assemble_get_element_value(g,e)}else g=drupalgap_form_get_element_id(d,a.id),c.values[d]=_drupalgap_form_state_values_assemble_get_element_value(g,
e)}});return drupalgap.form_states[a.id]=c}catch(d){console.log("drupalgap_form_state_values_assemble - "+d)}}
function _drupalgap_form_state_values_assemble_get_element_value(a,b){try{if(b.value_callback&&function_exists(b.value_callback))return(0,window[b.value_callback])(a,b);var c=null,d="",d="radios"==b.type?'input:radio[name="'+a+'"]:checked':"#"+a;switch(b.type){case "checkbox":var f=$(d),c=$(f).is(":checked")?1:0;break;case "checkboxes":c={};$.each(b.options,function(a,e){"attributes"!=a&&(empty(e),d='input[name="'+b.name+"["+a+']"]',$(d).is(":checked")?c[a]=a:c[a]=0)});break;case "list_boolean":f=
$(d),c=$(f).is(":checked")?$(f).attr("on"):$(f).attr("off")}null===c&&(c=$(d).val());"undefined"===typeof c&&(c=null);return c}catch(e){console.log("_drupalgap_form_state_values_assemble_get_element_value - "+e)}}function drupalgap_get_form(a){try{var b="",c=drupalgap_form_load.apply(null,Array.prototype.slice.call(arguments));c?b=drupalgap_form_render(c):drupalgap_alert("drupalgap_get_form - failed to get form ("+a+")");return b}catch(d){console.log("drupalgap_get_form - "+d)}}
function drupalgap_form_load(a){try{var b=drupalgap_form_defaults(a),c=a;if(drupalgap_function_exists(c)){var d=window[c],f=language_default(),e=[];$.each(arguments,function(a,b){e.push(b)});e.splice(0,1);b.arguments=e;if(0==e.length)b=d(b,null);else{var g=[];g.push(b);g.push(null);$.each(e,function(a,b){g.push(b)});b=d.apply(null,Array.prototype.slice.call(g))}$.each(b.elements,function(a,c){var d=!1,e=drupalgap_field_info_field(a);e&&(d=!0,b.elements[a].field_info_field=e,b.elements[a].field_info_instance=
drupalgap_field_info_instance(b.entity_type,a,b.bundle));b.elements[a].is_field=d;b.elements[a].name||(b.elements[a].name=a);e=null;if(d)for(d=parseInt(c.field_info_field.cardinality),-1==d&&(d=1),b.elements[a][f]||(b.elements[a][f]={}),e=0;e<d;e++){var g=drupalgap_form_element_item_create(a,b,f,e);b.elements[a][f][e]?$.extend(!0,b.elements[a][f][e],g):b.elements[a][f][e]=g}else c.options?c.options.attributes||(b.elements[a].options.attributes={}):b.elements[a].options={attributes:{}},e=drupalgap_form_get_element_id(a,
b.id),b.elements[a].id=e,b.elements[a].options.attributes.id=e});module_invoke_all("form_alter",b,null,a);drupalgap_form_local_storage_save(b)}else drupalgap_alert("drupalgap_form_load - no callback function ("+c+") available for form ("+a+")");return b}catch(h){console.log("drupalgap_form_load - "+h)}}function drupalgap_form_local_storage_delete(a){try{return window.localStorage.removeItem(drupalgap_form_id_local_storage_key(a))}catch(b){console.log("drupalgap_form_local_storage_delete - "+b)}}
function drupalgap_form_local_storage_load(a){try{var b=!1;return b=(b=window.localStorage.getItem(drupalgap_form_id_local_storage_key(a)))?JSON.parse(b):!1}catch(c){console.log("drupalgap_form_local_storage_load - "+c)}}function drupalgap_form_local_storage_save(a){try{window.localStorage.setItem(drupalgap_form_id_local_storage_key(a.id),JSON.stringify(a))}catch(b){console.log("drupalgap_form_local_storage_save - "+b)}}function drupalgap_form_id_local_storage_key(a){return"drupalgap_form_"+a}
function _drupalgap_form_render_elements(a){try{var b="",c="",d=[];$.each(a.elements,function(c,e){e.name||(e.name=c);if(drupalgap_form_element_access(e))if(e.is_field&&e.field_info_instance.widget.weight)d[e.field_info_instance.widget.weight]=_drupalgap_form_render_element(a,e);else{var f=null;a.bundle&&(f=a.bundle,"comment"==a.entity_type&&-1!=a.bundle.indexOf("comment_node_")&&(f=a.bundle.replace("comment_node_","")));a.entity_type&&f&&"undefined"!==typeof drupalgap.field_info_extra_fields[f][c]&&
"undefined"!==typeof drupalgap.field_info_extra_fields[f][c].weight?d[drupalgap.field_info_extra_fields[f][c].weight]=_drupalgap_form_render_element(a,e):b+=_drupalgap_form_render_element(a,e)}});if(!empty(d)){for(var f in d)c+=d[f]+"\n";b=c+"\n"+b}a.buttons&&0!=a.buttons.length&&$.each(a.buttons,function(c,d){if(drupalgap_form_element_access(d)){var e={type:"button",id:drupalgap_form_get_element_id(c,a.id)};d.attributes&&$.extend(e,d.attributes);b+="<button "+drupalgap_attributes(e)+'">'+d.title+
"</button>"}});return b}catch(e){console.log("_drupalgap_form_render_elements - "+e)}}
function _drupalgap_form_render_element(a,b){try{var c="";if(!b)return c;var d=b.name,f=language_default(),e=!1,g=!1,h=!1,k=!1;b.is_field?(e=b[f],g=b.field_info_instance.widget.module):(e={0:b},g=drupalgap_form_element_get_module_name(b.type));g&&(h=g+"_field_widget_form",drupalgap_function_exists(h)?k=window[h]:console.log("WARNING: _drupalgap_form_render_element() - "+h+'() does not exist for the "'+b.type+'" form element!'));if(!e||0==e.length)return c;var m={attributes:{}};m.field_info_field=
b.field_info_field;m.field_info_instance=b.field_info_instance;var n="",p="",q=null;$.each(e,function(c,d){q=!0;m.attributes.id=d.id;m.element=d;e[c].children||(e[c].children=[]);b.is_field&&0==c&&(d.title=b.title,p=theme("form_element_label",{element:d}));0==c&&"undefined"!==typeof b.title_placeholder&&b.title_placeholder&&"undefined"===typeof m.attributes.placeholder&&(m.attributes.placeholder=b.title);d.default_value||(d.default_value="");m.attributes.value=d.default_value;"undefined"!==typeof d.value&&
(m.attributes.value=d.value);k&&(k.apply(null,[a,null,b.field_info_field,b.field_info_instance,f,e,c,b]),d=$.extend(!0,d,e[c]),!d.type&&b.type&&(d.type=b.type));d.options&&d.options.attributes&&(m.attributes=$.extend(!0,m.attributes,d.options.attributes));n=_drupalgap_form_render_element_item(a,b,m,d);if(!n)return q=!1});if(!q)return"";g=!0;"undefined"===typeof b.wrapped||b.wrapped||(g=!1);"hidden"==b.type&&(g=!1,b.wrapped&&(g=!0));b.prefix&&(c+=b.prefix);var r={"class":drupalgap_form_get_element_container_class(d)};
g&&(c+="<div "+drupalgap_attributes(r)+">");"submit"==b.type||"hidden"==b.type||"undefined"!==typeof b.title_placeholder&&b.title_placeholder||(c=b.is_field?c+p:c+theme("form_element_label",{element:b}));""!=n&&(c+=n);b.description&&"hidden"!=b.type&&(c+="<div>"+b.description+"</div>");g&&(c+="</div>");b.suffix&&(c+=b.suffix);return c}catch(s){console.log("_drupalgap_form_render_element - "+s)}}
function _drupalgap_form_render_element_item(a,b,c,d){try{var f="";switch(d.type){case "text":d.type="textfield";break;case "list_text":case "list_float":case "list_integer":d.type="select"}var e=d.type;b.disabled&&(c.attributes.disabled="");"submit"==d.type&&(c.attributes.onclick="_drupalgap_form_submit('"+a.id+"');",c.attributes["data-theme"]||(c.attributes["data-theme"]="b"),"undefined"===typeof c.attributes.type&&(c.attributes.type="button"));$.extend(!0,c,d);"undefined"!==typeof c.value&&null!=
c.value||"undefined"===typeof d.default_value||(c.value=d.default_value);if(drupalgap_function_exists("theme_"+e))f+=theme(e,c);else if(d.markup||""==d.markup)f+=d.markup;else return console.log("WARNING: _drupalgap_form_render_element_item() - "+("Field "+d.type+" not supported.")),dpm(d),null;if(d.children&&0<d.children.length)for(a=0;a<d.children.length;a++)if(d.children[a].markup)f+=d.children[a].markup;else if(d.children[a].type||d.children[a].theme){var g=d.children[a].type;g||(g=d.children[a].theme);
d.children[a].title&&(f+=theme("form_element_label",{element:d.children[a]}));d.children[a].prefix&&(f+=d.children[a].prefix);f+=theme(g,d.children[a]);d.children[a].suffix&&(f+=d.children[a].suffix)}else console.log("WARNING: _drupalgap_form_render_element_item - failed to render child "+a+" for "+b.name);return f}catch(h){console.log("_drupalgap_form_render_element_item - "+h)}}
function drupalgap_form_element_item_create(a,b,c,d){try{var f=drupalgap_form_get_element_id(a,b.id,c,d);return{id:f,options:{attributes:{id:f}},required:b.elements[a].required}}catch(e){console.log("drupalgap_form_element_item_create - "+e)}}
function _drupalgap_form_element_items_widget_arguments(a,b,c,d,f){try{var e=[];e.push(a);e.push(b);e.push(c.field_info_field);e.push(c.field_info_instance);e.push(d);e.push(a.elements[c.name][d]);e.push(f);e.push(c);return e}catch(g){console.log("_drupalgap_form_element_items_widget_arguments - "+g)}}
function _drupalgap_form_submit(a){try{var b=drupalgap_form_local_storage_load(a);if(!b)return drupalgap_alert("_drupalgap_form_submit - failed to load form: "+a),!1;var c=drupalgap_form_state_values_assemble(b);drupalgap.form_errors={};a=function(){try{if($.each(b.validate,function(a,d){window[d].apply(null,Array.prototype.slice.call([b,c]))}),_drupalgap_form_validate(b,c),jQuery.isEmptyObject(drupalgap.form_errors))d();else{var a="";$.each(drupalgap.form_errors,function(b,c){a+=c+"\n\n"});drupalgap_alert(a)}}catch(f){console.log("_drupalgap_form_submit - form_validation - "+
f)}};var d=function(){try{$.each(b.submit,function(a,d){window[d].apply(null,Array.prototype.slice.call([b,c]))})}catch(a){console.log("_drupalgap_form_submit - form_submission - "+a)}};b.entity_type&&image_fields_present_on_entity_type(b.entity_type,b.bundle)?_image_field_form_process(b,c,{success:a}):a()}catch(f){console.log("_drupalgap_form_submit - "+f)}}
function _drupalgap_form_submit_response_errors(a,b,c,d,f){try{var e=JSON.parse(c.responseText);if("object"===typeof e&&e.form_errors){var g="";$.each(e.form_errors,function(b,c){if(""!=c){var d=b.indexOf("]");-1!=d&&(b=b.substr(0,d));d=b;a.elements[b]&&a.elements[b].title&&(d=a.elements[b].title);g+=$("<div>("+d+") - "+c+"</div>").text()+"\n"}});if(""!=g)return g}return!1}catch(h){console.log("_drupalgap_form_submit_response_errors - "+h)}}
function _drupalgap_form_validate(a,b){try{$.each(a.elements,function(a,c){if("submit"!=a&&c.required){var e=!0,g=null,g=c.is_field?b.values[a][language_default()][0]:b.values[a];if(empty(g))e=!1;else if("select"==c.type&&c.required&&""==g)e=!1;else if("checkboxes"==c.type&&c.required){var h=!1;$.each(b.values[a],function(a,b){if(b)return h=!0,!1});h||(e=!1)}e||(e=a,c.title&&(e=c.title),drupalgap_form_set_error(a,"The "+e+" field is required."))}})}catch(c){console.log("_drupalgap_form_validate - "+
c)}}function theme_checkbox(a){try{return a.attributes.type="checkbox",a.checked&&(a.attributes.checked="checked"),"<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_checkbox - "+b)}}function theme_checkboxes(a){try{var b="";a.attributes.type="checkboxes";$.each(a.options,function(c,f){"attributes"!=c&&(empty(f),b+="<label>"+theme("checkbox",{value:c,attributes:{name:a.name+"["+c+"]"}})+"&nbsp;"+f+"</label>")});return b}catch(c){console.log("theme_checkbox - "+c)}}
function theme_email(a){try{return a.attributes.type="email","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_email - "+b)}}function theme_file(a){try{return a.attributes.type="file","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_file - "+b)}}
function theme_form_element_label(a){try{var b=a.element;if(empty(b.title))return"";a="";b.id?a=b.id:b.attributes&&b.attributes["for"]&&(a=b.attributes["for"]);"radios"==b.type&&(a=b.name);var c='<label for="'+a+'"><strong>'+b.title+"</strong>";b.required&&(c+=theme("form_required_marker",{}));return c+"</label>"}catch(d){console.log("theme_form_element_label - "+d)}}function theme_form_required_marker(a){return"*"}
function theme_number(a){try{return a.attributes.type="number","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_number - "+b)}}function theme_hidden(a){try{return a.attributes.type="hidden",a.attributes.value||null==a.value||(a.attributes.value=a.value),"<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_hidden - "+b)}}
function theme_password(a){try{return a.attributes.type="password","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_password - "+b)}}
function theme_radios(a){try{var b="";if(a.options){var c=a.attributes.type="radio";a.attributes.id&&(c=a.attributes.id,delete a.attributes.id);a.attributes.name||(a.attributes.name=c);var d=0;$.each(a.options,function(e,f){if("attributes"!=e){var h="";a.value&&a.value==e&&(h=' checked="checked" ');var k=c+"_"+d.toString(),m='<label for="'+k+'">'+f+"</label>";b+='<input id="'+k+'" value="'+e+'" '+drupalgap_attributes(a.attributes)+h+" />"+m;d++}})}return b}catch(f){console.log("theme_radios - "+f)}}
function theme_range(a){try{return a.attributes.type="range","undefined"===typeof a.attributes.value&&(a.attributes.value=a.value),"<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_range - "+b)}}function theme_search(a){try{return a.attributes.type="search","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_search - "+b)}}
function theme_select(a){try{var b="";a.options&&$.each(a.options,function(c,f){if("attributes"!=c){var e="";"undefined"!==typeof a.value&&a.value==c&&(e=" selected ");b+='<option value="'+c+'" '+e+">"+f+"</option>"}});return"<select "+drupalgap_attributes(a.attributes)+">"+b+"</select>"}catch(c){console.log("theme_select - "+c)}}function theme_tel(a){try{return a.attributes.type="tel","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_tel - "+b)}}
function theme_textfield(a){try{return a.attributes.type="text","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_textfield - "+b)}}function theme_textarea(a){try{return"<div><textarea "+drupalgap_attributes(a.attributes)+">"+a.value+"</textarea></div>"}catch(b){console.log("theme_textarea - "+b)}}
function menu_execute_active_handler(a){try{var b=null;a&&(b=a);b||(b=drupalgap_path_get());var c=drupalgap_get_page_id(b),d=drupalgap_router_path_get();if(d){var f=drupalgap.menu_links[d].page_callback,e=[];if(drupalgap_function_exists(f)){var g=window[f];a="";if(drupalgap.menu_links[d].page_arguments){var h=arg(null,b);$.each(drupalgap.menu_links[d].page_arguments,function(a,b){is_int(b)&&h[b]?e.push(h[b]):e.push(b)});a=g.apply(null,Array.prototype.slice.call(e))}else a=g();"string"===typeof a&&
(a={content:{markup:a}});drupalgap.page.jqm_events=[];var k=drupalgap_jqm_page_events(),g=null;0<e.length&&(g=JSON.stringify(e));for(f=0;f<k.length;f++)if(drupalgap.menu_links[d][k[f]]){var m=k[f],n=drupalgap.menu_links[d][m];if(drupalgap_function_exists(n)){var p={page_id:c,jqm_page_event:m,jqm_page_event_callback:n,jqm_page_event_args:g};a[m]={markup:drupalgap_jqm_page_event_script_code(p)}}else console.log("menu_execute_active_handler ("+b+") - the jQM "+m+" call back function "+n+" does not exist!")}"object"===
typeof a&&(p={page_id:c,jqm_page_event:"pageshow",jqm_page_event_callback:"_drupalgap_page_title_pageshow",jqm_page_event_args:g},a.drupalgap_page_title_pageshow={markup:drupalgap_jqm_page_event_script_code(p)});return a}console.log("menu_execute_active_handler - no page callback ("+d+")");console.log(JSON.stringify(drupalgap.menu_links[d]))}else console.log("menu_execute_active_handler - no router path ("+b+")")}catch(q){console.log("menu_execute_active_handler("+b+") - "+q)}}
function menu_get_item(a,b){try{var c=null;a&&(c=a);return c&&drupalgap.menu_links[c]?drupalgap.menu_links[c]:null}catch(d){console.log("menu_get_item - "+d)}}function menu_item_default_options(){return{attributes:menu_item_default_attributes()}}function menu_item_default_attributes(){return{"class":""}}
function menu_list_system_menus(){try{var a={user_menu_anonymous:{title:"User menu authenticated"},user_menu_authenticated:{title:"User menu authenticated"},main_menu:{title:"Main menu"},primary_local_tasks:{title:"Primary Local Tasks"}};$.each(a,function(a,b){b.menu_name=a});return a}catch(b){console.log("menu_list_system_menus - "+b)}}
function menu_router_build(){try{var a=module_implements("menu"),b,c,d;$.each(a,function(a,f){b=f+"_menu";c=window[b];d=c();$.each(d,function(a,b){b.module=f;"undefined"===typeof b.type&&(b.type="MENU_NORMAL_ITEM");"undefined"===typeof b.options?b.options=menu_item_default_options():"undefined"===typeof b.options.attributes&&(b.options.attributes=menu_item_default_attributes());b.path=a;drupalgap_menu_router_build_menu_item_relationships(a,b);drupalgap.menu_links[a]=b})})}catch(f){console.log("menu_router_build - "+
f)}}
function drupalgap_get_menu_link_router_path(a){try{if(drupalgap.menu_links[a])return"undefined"===typeof drupalgap.menu_links[a].router_path?a:drupalgap.menu_links[a].router_path;var b=null,c=arg(null,a);if(c){var d=c.length;switch(c[0]){case "comment":case "user":case "node":1<d&&is_int(parseInt(c[1]))&&(c[1]="%",b=c.join("/"));break;case "taxonomy":2<d&&("vocabulary"==c[1]||"term"==c[1])&&is_int(parseInt(c[2]))&&(c[2]="%",b=c.join("/"));break;default:1<d&&is_int(parseInt(c[1]))&&(c[1]="%",b=c.join("/"))}}if(!b&&
c&&1<c.length)for(var f,e=c.length-1;-1!=e;e--){f="";for(d=0;d<c.length;d++)f=d<e?f+c[d]:f+"%",d!=c.length-1&&(f+="/");if(drupalgap.menu_links[f]){b=f;break}}drupalgap.menu_links[b]&&"MENU_DEFAULT_LOCAL_TASK"==drupalgap.menu_links[b].type&&drupalgap.menu_links[b].parent&&(b=drupalgap.menu_links[b].parent);b||(b=a);return b}catch(g){console.log("drupalgap_get_menu_link_router_path - "+g)}}
function drupalgap_menus_load(){try{drupalgap.settings.menus&&($.each(drupalgap.settings.menus,function(a,c){if(drupalgap.menus[a])$.extend(!0,drupalgap.menus[a],c);else if(c.menu_name||(c.menu_name=a),"regions"!=a){menu_save(c);var d=c.menu_name;drupalgap.blocks[0][d]={name:d,delta:d,module:"menu"}}}),$.each(drupalgap.menu_links,function(a,c){if(c.menu_name)if(drupalgap.menus[c.menu_name]){drupalgap.menus[c.menu_name].links||(drupalgap.menus[c.menu_name].links=[]);c.path=a;var d=drupalgap_menus_load_convert_menu_link_to_link_json(c);
drupalgap.menus[c.menu_name].links.push(d)}else console.log("drupalgap_menus_load - menu does not exist ("+c.menu_name+"), cannot attach link to it ("+a+")");c.region&&(drupalgap.theme.regions[c.region.name].links||(drupalgap.theme.regions[c.region.name].links=[]),drupalgap.theme.regions[c.region.name].links.push(c))}),"undefined"!==typeof drupalgap.settings.menus.regions&&$.each(drupalgap.settings.menus.regions,function(a,c){"undefined"!==typeof c.links&&$.isArray(c.links)&&0<c.links.length&&(drupalgap.theme.regions[a].links||
(drupalgap.theme.regions[a].links=[]),$.each(c.links,function(c,f){drupalgap.theme.regions[a].links.push(f)}))}))}catch(a){console.log("drupalgap_menus_load - "+a)}}function drupalgap_menus_load_convert_menu_link_to_link_json(a){try{var b={};a.title&&(b.title=a.title,b.text=a.title);a.path&&(b.path=a.path);a.options&&(b.options=a.options);a.region&&a.region.options&&(b.options=a.options=a.region.options);return b}catch(c){console.log("drupalgap_menus_load_convert_menu_link_to_link_json - "+c)}}
function drupalgap_menu_router_build_menu_item_relationships(a,b){try{var c=arg(null,a);if(1<c.length){var d=c.splice(0,c.length-1).join("/");b.parent=d;drupalgap.menu_links[d]&&("undefined"===typeof drupalgap.menu_links[d].children&&(drupalgap.menu_links[d].children=[]),drupalgap.menu_links[d].children.push(a),"undefined"===typeof b.siblings&&(b.siblings=[]),$.each(drupalgap.menu_links[d].children,function(c,d){d!=a&&drupalgap.menu_links[d]&&("undefined"===typeof drupalgap.menu_links[d].siblings&&
(drupalgap.menu_links[d].siblings=[]),drupalgap.menu_links[d].siblings.push(a),b.siblings.push(d))}))}}catch(f){console.log("drupalgap_menu_router_build_relationships - "+f)}}
$(document).on("pagebeforechange",function(a,b){try{drupalgap&&drupalgap.back?drupalgap.back=!1:drupalgap_jqm_active_page_url()!=drupalgap_get_page_id(drupalgap_path_get())&&"string"===typeof b.toPage&&(drupalgap&&!drupalgap.page.process?drupalgap.page.process=!0:drupalgap&&(template_preprocess_page(drupalgap.page.variables),template_process_page(drupalgap.page.variables)))}catch(c){console.log("pagebeforechange - "+c)}});
function path_to_theme(){try{if(drupalgap.theme_path)return drupalgap.theme_path;console.log("path_to_theme - drupalgap.theme_path is not set!");return!1}catch(a){console.log("path_to_theme - "+a)}}
function theme(a,b){try{b||(b={});if(b.markup)return b.markup;var c="",d=drupalgap.settings.theme+"_"+a;if(!function_exists(d)&&(d="theme_"+a,!function_exists(d))){var f=null;arguments.callee.caller&&(f=arguments.callee.caller.name);d="WARNING: "+d+"() does not exist.";f&&(d+=" Called by: "+f+"().");console.log(d);return c}"undefined"!==typeof b.attributes&&b.attributes||(b.attributes=b.options&&b.options.attributes?b.options.attributes:{});b.attributes["class"]||(b.attributes["class"]="");return c=
window[d].call(null,b)}catch(e){console.log("theme - "+e)}}var _theme_autocomplete_input_selector={},_theme_autocomplete_remote={},_theme_autocomplete_variables={},_theme_autocomplete_success_handlers={};
function theme_autocomplete(a){try{var b="",c=null,c="undefined"!==typeof a.field_info_field?a.field_info_field.field_name:"undefined"!==typeof a.attributes.id?a.attributes.id:user_password();a.autocomplete_id=c;_theme_autocomplete_variables[c]=a;var d=!1;a.remote&&(d=!0);a.remote=d;_theme_autocomplete_remote[c]=a.remote;d=null;a.attributes.id?d=a.attributes.id:(d="autocomplete_"+user_password(),a.attributes.id=d);var f={id:d};a.element&&"undefined"!==typeof a.element.default_value&&(f.value=a.element.default_value);
var b=b+theme("hidden",{attributes:f}),f=d+"-list",e={attributes:{id:f,"data-role":"listview","data-filter":"true","data-inset":"true","data-filter-placeholder":"..."}},g="";a.remote?(e.items=[],g+='<script type="text/javascript">$("#'+f+'").on("filterablebeforefilter", function(e, d) { _theme_autocomplete(this, e, d, "'+c+'"); });\x3c/script>'):(e.items=_theme_autocomplete_prepare_items(a),e.attributes["data-filter-reveal"]=!0);var h="#"+drupalgap_get_page_id()+" #"+d+' + form.ui-filterable input[data-type="search"]',
g=g+('<script type="text/javascript">_theme_autocomplete_input_selector["'+c+"\"] = '"+h+"';\x3c/script>"),b=b+theme("item_list",e);return b+g}catch(k){console.log("theme_autocomplete - "+k)}}
function _theme_autocomplete(a,b,c,d){try{var f=f;if("undefined"===typeof f.filter)console.log('_theme_autocomplete - A "filter" was not supplied.');else{var e="undefined"!==typeof f.value?!0:!1,g="undefined"!==typeof f.label?!0:!1;if(e||g){e?g||(f.label=f.value):f.value=f.label;var h=$(a),k=$(c.input).val(),m="";h.html("");if(k&&0<k.length)switch(h.html('<li><div class="ui-loader"><span class="ui-icon ui-icon-loading"></span></div></li>'),h.listview("refresh"),_theme_autocomplete_success_handlers[d]=
function(a,b,c,d){try{if(0!=b.length){var e=[],f=_theme_autocomplete_variables[a].value,g=_theme_autocomplete_variables[a].label;$.each(b,function(a,b){var h=null,h=c?b[d]:b;e.push({value:h[f],label:h[g]})});if(0!=e.length){_theme_autocomplete_variables[a].items=e;var k=_theme_autocomplete_prepare_items(_theme_autocomplete_variables[a]);$.each(k,function(a,b){m+="<li>"+b+"</li>"});h.html(m);h.listview("refresh");h.trigger("updatelayout")}}}catch(n){console.log("_theme_autocomplete_success_handlers["+
a+"] - "+n)}},f.field_info_field.settings.handler){case "views":case "og":var n=f.path+"?"+f.filter+"="+encodeURIComponent(k);f.params&&(n+="&"+f.params);views_datasource_get_view_result(n,{success:function(a){var b=!0;f.custom&&(b=!1);var c=null,c=b?a[a.view.root]:a;(0,_theme_autocomplete_success_handlers[d])(d,c,b,a.view.child)}});break;case "base":var p=f.field_info_field.settings,q=p.target_type+"_index";if(!drupalgap_function_exists(q)){console.log("WARNING - _theme_autocomplete - "+q+"() does not exist!");
break}var r={fields:["nid","title"],parameters:{title:"%"+k+"%"},parameters_op:{title:"like"}};$.each(p.handler_settings.target_bundles,function(a,b){r.parameters.type=a;return!1});(0,window[q])(r,{success:function(a){(0,_theme_autocomplete_success_handlers[d])(d,a,!1)}})}}else console.log('_theme_autocomplete - A "value" and/or "label" was not supplied.')}}catch(s){console.log("_theme_autocomplete - "+s)}}
function _theme_autocomplete_prepare_items(a){try{var b=[];a.items&&(b=a.items);var c=[];0<b.length&&$.each(b,function(b,d){var g="",h="";"string"===typeof d?h=g=d:(g=d.value,h=d.label);g=l(h,null,{attributes:{value:g,onclick:"_theme_autocomplete_click('"+a.attributes.id+"', this, '"+a.autocomplete_id+"')"}});c.push(g)});return c}catch(d){console.log("_theme_autocomplete_prepare_items - "+d)}}
function _theme_autocomplete_click(a,b,c){try{var d=a+"-list";$("#"+a).val($(b).attr("value"));$(_theme_autocomplete_input_selector[c]).val($(b).html());_theme_autocomplete_remote[c]?$("#"+d).html(""):($("#"+d+" li").addClass("ui-screen-hidden"),$("#"+d).listview("refresh"));if(_theme_autocomplete_variables[c].item_onclick&&drupalgap_function_exists(_theme_autocomplete_variables[c].item_onclick))(0,window[_theme_autocomplete_variables[c].item_onclick])(a,$(b))}catch(f){console.log("_theme_autocomplete_click - "+
f)}}function theme_button(a){try{return a.attributes["data-role"]="button","<a "+drupalgap_attributes(a.attributes)+">"+a.text+"</a>"}catch(b){console.log("theme_button_link - "+b)}}function theme_button_link(a){try{return a.attributes["data-role"]="button",theme_link(a)}catch(b){console.log("theme_button_link - "+b)}}
function theme_collapsible(a){try{a.attributes["data-role"]="collapsible";var b="h2";a.header_type&&(b=a.header_type);var c={};a.header_attributes&&(c=a.header_attributes);return"<div "+drupalgap_attributes(a.attributes)+"><"+b+" "+drupalgap_attributes(c)+">"+a.header+"</"+b+">"+a.content+"</div>"}catch(d){console.log("theme_collapsible - "+d)}}
function theme_collapsibleset(a){try{a.attributes["data-role"]="collapsible-set";var b="<div "+drupalgap_attributes(a.attributes)+">";$.each(a.items,function(a,c){b+=theme("collapsible",c)});return b+="</div>"}catch(c){console.log("theme_collapsibleset - "+c)}}function theme_controlgroup(a){try{a.attributes["data-role"]="controlgroup";var b="<div "+drupalgap_attributes(a.attributes)+">";$.each(a.items,function(a,c){b+=c});return b+="</div>"}catch(c){console.log("theme_controlgroup - "+c)}}
function theme_header(a){try{return a.attributes["data-role"]="header","undefined"===typeof a.type&&(type="h2"),"<div "+drupalgap_attributes(a.attributes)+"><"+type+">"+a.text+"</"+type+"></div>"}catch(b){console.log("theme_header - "+b)}}function theme_image(a){try{return a.path&&(a.attributes.src=a.path),a.alt&&(a.attributes.alt=a.alt),a.title&&(a.attributes.title=a.title),"<img "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_image - "+b)}}
function theme_audio(a){try{return a.path&&(a.attributes.src=a.path),a.alt&&(a.attributes.alt=a.alt),a.title&&(a.attributes.title=a.title),"<audio controls "+drupalgap_attributes(a.attributes)+"></audio>"}catch(b){console.log("theme_audio - "+b)}}function theme_video(a){try{return a.path&&(a.attributes.src=a.path),a.alt&&(a.attributes.alt=a.alt),a.title&&(a.attributes.title=a.title),"<video controls "+drupalgap_attributes(a.attributes)+"></video>"}catch(b){console.log("theme_video - "+b)}}
function theme_image_style(a){try{return a.path=image_style_url(a.style_name,a.path),theme_image(a)}catch(b){console.log("theme_image - "+b)}}function theme_item(a){try{var b="";$.each(a.item,function(c,f){b+="<h2>"+a.model.fields[c].title+"</h2><p>"+f+"</p>"});return b}catch(c){console.log("theme_item - "+c)}}
function theme_item_list(a){try{var b="ul";a.type&&(b=a.type);var c="";a.title&&(c+="<h2>"+a.title+"</h2>");c+="<"+b+" "+drupalgap_attributes(a.attributes)+">";if(a.items&&0<a.items.length){var d="undefined"!==typeof a.attributes["data-role"]&&"listview"==a.attributes["data-role"];$.each(a.items,function(a,b){var f;c+="<li";d&&(f=$(b).attr("data-icon"))&&(c+=' data-icon="'+f+'"');c+=">"+b+"</li>"})}return c+="</"+b+">"}catch(f){console.log("theme_item_list - "+f)}}
function theme_jqm_item_list(a){try{return a.attributes?a.attributes["data-role"]&&"listview"!=a.attributes["data-role"]||(a.attributes["data-role"]="listview"):a.attributes["data-role"]="listview",theme_item_list(a)}catch(b){console.log("theme_jqm_item_list - "+b)}}
function theme_link(a){try{var b="";a.text&&(b=a.text);if("undefined"!==typeof a.path&&null!=a.path){var c="drupalgap_goto('"+a.path+"');";if(a.options)if(a.options.InAppBrowser)c="window.open('"+a.path+"', '_blank', 'location=yes');";else{var d="";$.each(a.options,function(a,b){"attributes"!=a&&("string"===typeof b&&(b="'"+b+"'"),d+=a+":"+b+",")});c="drupalgap_goto('"+a.path+"', {"+d+"});"}return'<a href="#" onclick="javascript:'+c+'"'+drupalgap_attributes(a.attributes)+">"+b+"</a>"}"undefined"===
typeof a.attributes.href&&(a.attributes.href="#");return"<a "+drupalgap_attributes(a.attributes)+">"+b+"</a>"}catch(f){console.log("theme_link - "+f)}}function theme_logout(a){try{return bl("Logout","user/logout",{attributes:{"data-icon":"action","data-iconpos":"right"}})}catch(b){console.log("theme_logout - "+b)}}
function theme_popup(a){try{a.attributes["data-role"]="popup";var b={};a.button_attributes&&(b=a.button_attributes);b.href="#"+a.attributes.id;b["data-rel"]="popup";return bl(a.button_text,null,{attributes:b})+"<div "+drupalgap_attributes(a.attributes)+">"+a.content+"</div>"}catch(c){console.log("theme_popup - "+c)}}function theme_submit(a){try{return"<button "+drupalgap_attributes(a.attributes)+">"+a.element.value+"</button>"}catch(b){console.log("theme_submit - "+b)}}
function theme_table(a){try{var b="<table "+drupalgap_attributes(a.attributes)+">";a.header&&(b+="<thead><tr>",$.each(a.header,function(a,c){c.data&&(b+="<td>"+c.data+"</td>")}),b+="</tr></thead>");b+="<tbody>";a.rows&&$.each(a.rows,function(a,c){b+="<tr>";c&&$.each(c,function(a,c){b+="<td>"+c+"</td>"});b+="</tr>"});return b+"</tbody></table>"}catch(c){console.log("theme_table - "+c)}}
function theme_jqm_table(a){try{return a.attributes["data-role"]="table",a.attributes["data-mode"]="reflow",theme_table(a)}catch(b){console.log("theme_jqm_table - "+b)}}function template_preprocess_page(a){try{"undefined"===typeof a.attributes&&(a.attributes={}),a.attributes["data-role"]="page",module_invoke_all("preprocess_page"),drupalgap.page.variables=a}catch(b){console.log("template_preprocess_page - "+b)}}
function template_process_page(a){try{var b=drupalgap_path_get();drupalgap.output=menu_execute_active_handler();var c=drupalgap_get_page_id(b),d=$("#"+c).html();$.each(drupalgap.theme.regions,function(a,b){d=d.replace("{:"+b.name+":}",drupalgap_render_region(b))});$("#"+c).html(d)}catch(f){console.log("template_process_page - "+f)}}
function drupalgap_block_load(a){try{var b=null;drupalgap.blocks&&$.each(drupalgap.blocks,function(c,f){if(f[a])return b=f[a],!1});null==b&&drupalgap_alert('drupalgap_block_load - failed to load "'+a+'" block!');return b}catch(c){console.log("drupalgap_block_load - "+c)}}
function comment_menu(){return{"comment/%":{title:"Comment",page_callback:"comment_page_view",page_arguments:[1],pageshow:"comment_page_view_pageshow",title_callback:"comment_page_title",title_arguments:[1]},"comment/%/view":{title:"View",type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"comment/%/edit":{title:"Edit",page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["comment_edit","comment",1],weight:0,type:"MENU_LOCAL_TASK",access_callback:"comment_access",access_arguments:[1],
options:{reloadPage:!0}}}}function comment_access(a){try{return a.uid==Drupal.user.uid&&user_access("edit own comments")||user_access("administer comments")?!0:!1}catch(b){console.log("comment_access - "+b)}}function comments_container_id(a){return"comments_container_"+a}function comment_container_id(a){return"comment_container_"+a}function comment_list_id(a){try{return comments_container_id(a)}catch(b){console.log("comment_list_id - "+b)}}
function comment_page_view(a){try{if(a)return{container:_drupalgap_entity_page_container("comment",a,"view")};drupalgap_error("No comment id provided!")}catch(b){console.log("comment_page_view - "+b)}}function comment_page_view_pageshow(a){try{comment_load(a,{success:function(b){b=theme("comment",{comment:b});b=theme("jqm_item_list",{items:[b]});_drupalgap_entity_page_container_inject("comment",a,"view",b)}})}catch(b){console.log("comment_page_view_pageshow - "+b)}}
function comment_page_title(a,b){try{var c="";comment_load(b,{success:function(b){b&&b.subject&&(c=b.subject);a.call(null,c)}})}catch(d){console.log("comment_page_title - "+d)}}
function comment_edit(a,b,c,d){try{return c||(c={nid:arg(1)}),b=null,b=d&&d.type?d.type:c.node_type.replace("comment_node_",""),d="comment_node_"+b,a.entity_type="comment",a.bundle=d,a.action="node/"+c.nid,drupalgap_entity_add_core_fields_to_form("comment",d,a,c),drupalgap_field_info_instances_add_to_form("comment",d,a,c),a.elements.submit={type:"submit",value:"Save"},d="Add comment",c&&c.cid&&(d="Edit comment",a.buttons.cancel=drupalgap_form_cancel_button(),a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("comment",
c.cid)),a.prefix+="<h2>"+d+"</h2>",a}catch(f){console.log("comment_edit - "+f)}}function comment_edit_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("comment_edit_submit - "+d)}}
function comment_services_postprocess(a,b){try{if("comment"==a.service&&"create"==a.resource){var c=drupalgap_path_get();"node/%"==drupalgap_get_menu_link_router_path(c)&&node_load(arg(1),{reset:!0,success:function(a){comment_load(b.cid,{success:function(b){var c=comments_container_id(a.nid);$("#"+c).append(theme("comment",{comment:b})).trigger("create");scrollToElement("#"+c+" :last-child",500);b="#"+drupalgap_get_page_id()+" #comment_edit";drupalgap_form_clear(b)}})}})}}catch(d){console.log("comment_services_postprocess - "+
d)}}function theme_comments(a){try{a.attributes.id=comments_container_id(a.node.nid);a.attributes["class"]+="comments ";a.attributes["data-role"]="collapsible-set";var b="<div "+drupalgap_attributes(a.attributes)+">";0<a.node.comment_count&&(b+="<h2>Comments</h2>");a.comments&&(b+=a.comments);return b+"</div>"}catch(c){console.log("theme_comments - "+c)}}
function theme_comment(a){try{var b=a.comment;a.attributes.id=comment_container_id(b.cid);a.attributes["class"]+="comment ";a.attributes["data-role"]="collapsible";a.attributes["data-collapsed"]="false";var c="<div "+drupalgap_attributes(a.attributes)+">",d=a="";b.picture_uri&&(d+=theme("image",{path:drupalgap_image_path(b.picture_uri)}));var f=new Date(1E3*b.created),f=f.toLocaleDateString()+" at "+f.toLocaleTimeString(),e=d+"<h3>"+b.name+"</h3><p>"+f+"</p>",e=l(e,"user/"+b.uid);a+="<h2>"+b.subject+
'</h2><ul data-role="listview" data-inset="true"><li>'+e+"</li></ul>"+b.content;c+=a;user_access("administer comments")&&(c+=theme("button_link",{text:"Edit",path:"comment/"+b.cid+"/edit",attributes:{"data-icon":"gear"}}));return c+"</div>"}catch(g){console.log("theme_comment - "+g)}}
function contact_menu(){return{contact:{title:"Contact",page_callback:"drupalgap_get_form",page_arguments:["contact_site_form"],pageshow:"contact_site_form_pageshow",access_arguments:["access site-wide contact form"]},"user/%/contact":{title:"User contact",page_callback:"drupalgap_get_form",page_arguments:["contact_personal_form",1],pageshow:"contact_personal_form_pageshow",access_arguments:["access user contact forms"],weight:10,type:"MENU_LOCAL_TASK"}}}
function contact_index(a){try{a.method="GET",a.path="contact.json",a.service="contact",a.resource="index",Drupal.services.call(a)}catch(b){console.log("contact_index - "+b)}}function contact_site(a){try{a.method="POST",a.path="contact/site.json",a.service="contact",a.resource="site",Drupal.services.call(a)}catch(b){console.log("contact_site - "+b)}}
function contact_personal(a){try{a.method="POST",a.path="contact/personal.json",a.service="contact",a.resource="personal",Drupal.services.call(a)}catch(b){console.log("contact_personal - "+b)}}
function contact_site_form(a,b){try{return a.elements.name={title:"Your name",type:"textfield",required:!0},a.elements.mail={title:"Your e-mail address",type:"email",required:!0},a.elements.subject={title:"Subject",type:"textfield",required:!0},a.elements.category={title:"Category",type:"select",required:!0},a.elements.message={title:"Message",type:"textarea",required:!0},a.elements.copy={title:"Send yourself a copy?",type:"checkbox",default_value:0,access:!1},a.elements.submit={type:"submit",value:"Send message"},
0!=Drupal.user.uid&&(a.elements.name.default_value=Drupal.user.name,a.elements.name.disabled=!0,a.elements.mail.default_value=Drupal.user.mail,a.elements.mail.disabled=!0,a.elements.copy.access=!0),a}catch(c){console.log("contact_site_form - "+c)}}
function contact_site_form_pageshow(){try{contact_index({success:function(a){a&&a.length&&($.each(a,function(a,b){var f='<option value="'+b.cid+'" '+(1==b.selected?"selected":"")+">"+b.category+"</option>";$("#edit-contact-site-form-category").append(f)}),$("#edit-contact-site-form-category").selectmenu("refresh"),1==a.length&&$("#contact_site_form .field-name-category").hide())}})}catch(a){console.log("contact_site_form_pageshow - "+a)}}
function contact_site_form_submit(a,b){contact_site({data:JSON.stringify({name:b.values.name,mail:b.values.mail,subject:b.values.subject,category:b.values.category,message:b.values.message,copy:b.values.copy}),success:function(a){a[0]?drupalgap_alert("Your message has been sent!"):drupalgap_alert("There was a problem sending your message!",{title:"Error"});drupalgap_form_clear()},error:function(a,b,f){if(f&&(f=JSON.parse(f),f.form_errors)){var e="";$.each(f.form_errors,function(a,b){e+=b+"\n"});""!=
e&&drupalgap_alert(e)}}})}
function contact_personal_form(a,b,c){try{a.elements.name={title:"Your name",type:"textfield",required:!0};a.elements.mail={title:"Your e-mail address",type:"email",required:!0};a.elements.to={type:"hidden",required:!0};var d=contact_personal_form_to_container_id(c);a.elements.to_display={title:"To",markup:'<div id="'+d+'"></div>'};a.elements.subject={title:"Subject",type:"textfield",required:!0};a.elements.message={title:"Message",type:"textarea",required:!0};a.elements.copy={title:"Send yourself a copy?",
type:"checkbox",default_value:0,access:!1};a.elements.submit={type:"submit",value:"Send message"};0!=Drupal.user.uid&&(a.elements.name.default_value=Drupal.user.name,a.elements.name.disabled=!0,a.elements.mail.default_value=Drupal.user.mail,a.elements.mail.disabled=!0,a.elements.copy.access=!0);return a}catch(f){console.log("contact_personal_form - "+f)}}
function contact_personal_form_pageshow(a,b){try{user_load(b,{success:function(a){if(a.data.contact){var c=contact_personal_form_to_container_id(b);$("#"+c).html(l(a.name,"user/"+a.uid));c="#"+drupalgap_get_page_id()+" #edit-contact-personal-form-to";$(c).val(a.name)}else $("#"+drupalgap_get_page_id()+" #drupalgap_form_errors").html("<div class='messages warning'>Sorry, this user's contact form is disabled.</div>")}})}catch(c){console.log("contact_personal_form_pageshow - "+c)}}
function contact_personal_form_submit(a,b){contact_personal({data:JSON.stringify({name:b.values.name,mail:b.values.mail,to:b.values.to,subject:b.values.subject,category:b.values.category,message:b.values.message,copy:b.values.copy}),success:function(a){a[0]?drupalgap_alert("Your message has been sent!"):drupalgap_alert("There was a problem sending your message!",{title:"Error"});drupalgap_form_clear()},error:function(a,b,f){if(f&&(f=JSON.parse(f),f.form_errors)){var e="";$.each(f.form_errors,function(a,
b){e+=b+"\n"});""!=e&&drupalgap_alert(e)}}})}function contact_personal_form_to_container_id(a){return"contact_personal_form_user_"+a}function drupalgap_entity_add_core_fields_to_form(a,b,c,d){try{var f=drupalgap_entity_get_core_fields(a,b);$.each(f,function(a,b){var e=b.default_value;d&&d[a]&&(e=d[a]);c.elements[a]=b;c.elements[a].default_value=e})}catch(e){console.log("drupalgap_entity_add_core_fields_to_form - "+e)}}
function drupalgap_entity_assemble_data(a,b,c,d){try{console.log("WARNING: drupalgap_entity_assemble_data() has been deprecated! Now just call e.g. node_save() for auto assembly.")}catch(f){console.log("drupalgap_entity_assemble_data - "+f)}}function drupalgap_entity_edit_form_delete_button(a,b){return{title:"Delete",attributes:{onclick:"javascript:drupalgap_entity_edit_form_delete_confirmation('"+a+"', "+b+");"}}}
function drupalgap_entity_edit_form_delete_confirmation(a,b){try{if(confirm("Delete this content, are you sure? This action cannot be undone...")){drupalgap.loader="deleting";var c=services_get_resource_function_for_entity(a,"delete");(0,window[c])(b,{success:function(c){c=drupalgap_get_page_id(a+"/"+b);drupalgap_page_in_dom(c)&&drupalgap_remove_page_from_dom(c);window.localStorage.removeItem(entity_local_storage_key(a,b));drupalgap_goto("",{form_submission:!0})}})}}catch(d){console.log("drupalgap_entity_edit_form_delete_confirmation - "+
d)}}
function drupalgap_entity_render_content(a,b){try{b.content="";var c=b.type;"comment"==a&&(c=b.bundle);var d=drupalgap_field_info_instances(a,c);if(d){var f={},e={};$.each(d,function(a,b){if(!b.display)return!1;var c=b.display["default"];b.display.drupalgap&&(c=b.display.drupalgap,"undefined"===typeof c.module&&"undefined"!==typeof b.display["default"].module&&(c.module=b.display["default"].module));"hidden"!=c.type&&(e[a]=c,f[a]=c.weight)});var g=[];$.each(f,function(a,b){g.push(b)});g.sort(function(a,b){return a-
b});var h=[];$.each(g,function(c,g){$.each(f,function(c,f){if(g==f&&-1==h.indexOf(c))return h.push(c),b.content+=drupalgap_entity_render_field(a,b,c,d[c],e[c]),!1})});module_invoke_all("entity_post_render_content",b,a,c);_entity_local_storage_save(a,b[entity_primary_key(a)],b)}}catch(k){console.log("drupalgap_entity_render_content - "+k)}}
function drupalgap_entity_render_field(a,b,c,d,f){try{var e="",g=f.module;if(!g)if(d.widget.module)g=d.widget.module;else return console.log("drupalgap_entity_render_field - unable to locate the module for the field ("+c+")"),e;g+="_field_formatter_view";if(drupalgap_function_exists(g)){var h=window[g],g=null,k=language_default(),m=b.language;b[c]&&(b[c][k]?g=b[c][k]:b[c][m]?g=b[c][m]:b[c].und?(g=b[c].und,m="und"):g=b[c]);var n=h(a,b,d,drupalgap_field_info_field(c),m,g,f);$.each(n,function(a,b){var c=
"";b.markup?c=b.markup:b.theme&&(c=theme(b.theme,b));e+=c})}else console.log("WARNING: drupalgap_entity_render_field - "+g+"() does not exist! ("+c+")");if(""!=e&&"hidden"!=f.label){var p="<h3>"+d.label+"</h3>",p="<div>"+p+"</div>";switch(f.label){case "below":e+=p;break;default:e=p+e}}e='<div class="'+c+'">'+e+"</div>";a={content:e};module_invoke_all("entity_post_render_field",b,c,d,a);return a.content!=e?a.content:e}catch(q){console.log("drupalgap_entity_render_field - "+q)}}
function drupalgap_entity_build_from_form_state(a,b){try{var c={},d=language_default();$.each(b.values,function(b,f){if("undefined"===typeof a.elements[b].access||a.elements[b].access){var h=!1,k=!1,k=!1;a.elements[b].is_field&&(h=!0,k=a.elements[b].field_info_field.module,k+="_assemble_form_state_into_field",function_exists(k)||(k=!1));var m=drupalgap_field_key(b);if(m){var n=a.elements[b].field_info_field.cardinality;-1==n&&(n=1);if("undefined"!==typeof f[d][0]){c[b]={};var p=!0;"taxonomy_term_reference"==
a.elements[b].type||"options_select"==a.elements[b].field_info_instance.widget.type?(p=!1,c[b][d]={}):c[b][d]=[];for(var q=0;q<n;q++)if("undefined"!==typeof f[d][q]){var r=f[d][q],s={value:"value",use_key:!0,use_wrapper:!0,use_delta:p,name:b,form_id:a.id,element_id:a.elements[b][d][q].id};h&&k&&(r=(0,window[k])(a.entity_type,a.bundle,r,a.elements[b].field_info_field,a.elements[b].field_info_instance,d,q,s));m!=s.value&&(m=s.value);s.use_delta?s.use_key?(s={},s[m]=r,c[b][d].push(s)):c[b][d].push(r):
s.use_wrapper?$.isArray(c[b][d])?(console.log("WARNING: drupalgap_entity_build_from_form_state - cannot use key ("+m+") on field ("+b+") language code array, key will be ignored."),c[b][d].push(r)):c[b][d][m]=r:c[b][d]=r;null===r&&"undefined"!==typeof c[b]&&"list_boolean"!=a.elements[b].type&&delete c[b];!h||p||"options_select"!=a.elements[b].field_info_instance.widget.type||a.elements[b].required||""!==r||"undefined"===typeof c[b]||delete c[b]}}}else"undefined"!==typeof f&&(c[b]=f)}});return c}catch(f){console.log("drupalgap_entity_build_from_form_state - "+
f)}}
function drupalgap_entity_form_submit(a,b,c){try{var d=entity_primary_key(a.entity_type),f=!1;c[d]&&""!=c[d]&&(f=!0);drupalgap.loader="saving";var e="create";f&&(e="update",window.localStorage.removeItem(entity_local_storage_key(a.entity_type,c[d])));(0,window[services_get_resource_function_for_entity(a.entity_type,e)])(c,{success:function(b){try{var c=a.action;if(!c){var e=a.entity_type;if("taxonomy_vocabulary"==e||"taxonomy_term"==e)e=e.replace("_","/");c=e+"/"+b[d]}drupalgap_goto(c,{form_submission:!0})}catch(f){console.log("drupalgap_entity_form_submit - success - "+f)}},
error:function(c,d,e){try{var f=_drupalgap_form_submit_response_errors(a,b,c,d,e);f&&drupalgap_alert(f)}catch(g){console.log("drupalgap_entity_form_submit - error - "+g)}}})}catch(g){console.log("drupalgap_entity_form_submit - "+g)}}
function drupalgap_entity_get_core_fields(a,b){try{var c={};switch(a){case "comment":var d=b.replace("comment_node_","");$.each(drupalgap.entity_info[a].schema_fields_sql["base table"],function(a,b){var d={type:"hidden",required:!1,default_value:"",title:ucfirst(b)};c[b]=d});c.nid.required=!0;c.name.type="textfield";0!=Drupal.user.uid&&(c.name.default_value=Drupal.user.name,c.name.disabled=!0);drupalgap.content_types_list[d].comment_subject_field&&(c.subject.type="textfield");var f=drupalgap.content_types_list[d].comment_anonymous;
switch(f){case "0":delete c.mail;delete c.homepage;break;case "1":break;case "2":c.mail.required=!0;c.homepage.required=!0;break;default:console.log("WARNING: drupalgap_entity_get_core_fields - Unknown anonymous comment setting ("+d+"): "+f)}0==Drupal.user.uid&&(c.mail&&(c.mail.type="textfield"),c.homepage&&(c.homepage.type="textfield"));break;case "node":c.nid={type:"hidden",required:!1,default_value:""};c.title={type:"textfield",title:"Title",required:!0,default_value:"",description:""};c.type=
{type:"hidden",required:!0,default_value:""};c.language={type:"hidden",required:!0,default_value:language_default()};break;case "user":c.uid={type:"hidden",required:!1,default_value:""};c.name={type:"textfield",title:"Username",required:!0,default_value:"",description:""};c.mail={type:"email",title:"E-mail address",required:!0,default_value:"",description:""};c.picture={type:"image",widget_type:"imagefield_widget",title:"Picture",required:!1,value:"Add Picture"};break;case "taxonomy_term":c={vid:{type:"hidden",
required:!0,default_value:""},tid:{type:"hidden",required:!1,default_value:""},name:{type:"textfield",title:"Name",required:!0,default_value:""},description:{type:"textarea",title:"Description",required:!1,default_value:""}};break;case "taxonomy_vocabulary":c={vid:{type:"hidden",required:!1,default_value:""},name:{type:"textfield",title:"Name",required:!0,default_value:""},machine_name:{type:"textfield",title:"Machine Name",required:!0,default_value:""},description:{type:"textarea",title:"Description",
required:!1,default_value:""}};break;default:console.log("drupalgap_entity_get_core_fields - entity type not supported yet ("+a+")")}return c}catch(e){console.log("drupalgap_entity_get_core_fields - "+e)}}function drupalgap_entity_get_info(a){try{return a?a&&drupalgap.entity_info[a]?drupalgap.entity_info[a]:!1:drupalgap.entity_info}catch(b){console.log("drupalgap_entity_get_info - "+b)}}
function drupalgap_entity_get_primary_key(a){try{return console.log("WARNING: drupalgap_entity_get_primary_key() is deprecated! Use entity_primary_key() instead."),entity_primary_key(a)}catch(b){console.log("drupalgap_entity_get_primary_key - "+b)}}function _drupalgap_entity_page_container(a,b,c){try{return{markup:'<div id="'+_drupalgap_entity_page_container_id(a,b,c)+'"></div>'}}catch(d){console.log("_drupalgap_entity_page_container - "+d)}}
function _drupalgap_entity_page_container_id(a,b,c){return a+"_"+b+"_"+c+"_container"}function _drupalgap_entity_page_container_inject(a,b,c,d){try{var f=_drupalgap_entity_page_container_id(a,b,c);drupalgap.output=d;$("#"+f).html(drupalgap_render_page()).trigger("create")}catch(e){console.log("_drupalgap_entity_page_container_inject - "+e)}}function entity_page_edit(a,b,c){try{return{container:_drupalgap_entity_page_container(b,c,"edit")}}catch(d){console.log("entity_page_edit - "+d)}}
function entity_page_edit_pageshow(a,b,c){try{entity_load(b,c,{success:function(d){_drupalgap_entity_page_container_inject(b,c,"edit",drupalgap_get_form(a,d))}})}catch(d){console.log("entity_page_edit_pageshow - "+d)}}
function entity_primary_key_title(a){try{var b;switch(a){case "comment":b="subject";break;case "file":b="filename";break;case "node":b="title";break;case "taxonomy_term":b="name";break;case "taxonomy_vocabulary":b="name";break;case "user":b="name";break;default:console.log("entity_primary_key_title - unsupported entity type ("+a+")")}return b}catch(c){console.log("entity_primary_key_title - "+c)}}
function entity_services_request_pre_postprocess_alter(a,b){try{"retrieve"==a.resource&&in_array(a.service,entity_types())?"undefined"===typeof b.content&&drupalgap_entity_render_content(a.service,b):"comment"==a.service&&"index"==a.resource&&$.each(b,function(c,f){"undefined"===typeof f.content&&drupalgap_entity_render_content(a.service,b[c])})}catch(c){console.log("entity_services_request_pre_postprocess_alter - "+c)}}
function drupalgap_field_info_field(a){try{return drupalgap.field_info_fields[a]}catch(b){console.log("drupalgap_field_info_field - "+b)}}function drupalgap_field_info_fields(){try{return drupalgap.field_info_fields}catch(a){console.log("drupalgap_field_info_fields - "+a)}}
function drupalgap_field_info_instance(a,b,c){try{var d=drupalgap_field_info_instances(a,c);return d?d[b]?d[b]:(console.log('WARNING: drupalgap_field_info_instance - "'+b+'" does not exist for entity ('+a+") bundle ("+c+")"),null):(console.log("WARNING: drupalgap_field_info_instance - instance was null for entity ("+a+") bundle ("+c+") using field ("+b+")"),null)}catch(f){console.log("drupalgap_field_info_instance - "+f)}}
function drupalgap_field_info_instances(a,b){try{var c;b?"undefined"!==typeof drupalgap.field_info_instances[a]&&(c=drupalgap.field_info_instances[a][b]):c="commerce_product"==a?drupalgap.field_info_instances[a]:drupalgap.field_info_instances[a][a];return c}catch(d){console.log("drupalgap_field_info_instances - "+d)}}
function drupalgap_field_info_instances_add_to_form(a,b,c,d){try{var f=drupalgap_field_info_instances(a,b),e=language_default();d&&d.language&&(e=d.language);f&&$.each(f,function(a,b){if("user_register_form"!=c.id||b.settings.user_register_form){var f=drupalgap_field_info_field(a);if(f){c.elements[a]={type:f.type,title:b.label,required:b.required,description:b.description};c.elements[a][e]||(c.elements[a][e]={});var g=b.default_value,p=0,f=parseInt(f.cardinality);-1==f&&(f=1);if(d&&d[a]&&0!=d[a].length)for(p=
0;p<f;p++)d[a][e][p]&&"undefined"!==typeof d[a][e][p].value&&(g=d[a][e][p].value),null==g&&(g=""),c.elements[a][e][p]={value:g},d[a][e][p]&&(c.elements[a][e][p].item=d[a][e][p])}}})}catch(g){console.log("drupalgap_field_info_instances_add_to_form - "+g)}}
function drupalgap_field_key(a){try{var b=!1,c=drupalgap_field_info_field(a);c&&(b="value","image"==c.module&&"image"==c.type?b="fid":"taxonomy"==c.module&&"taxonomy_term_reference"==c.type&&(b="tid"));return b}catch(d){console.log("drupalgap_field_key - "+d)}}
function list_field_formatter_view(a,b,c,d,f,e,g){try{var h={};empty(e)||$.each(e,function(a,b){var e="";"list_default"==g.type?(e=d.settings.allowed_values[b.value],"list_boolean"==d.type&&"options_onoff"==c.widget.type&&(e="&nbsp;")):e=b.value;h[a]={markup:e}});return h}catch(k){console.log("list_field_formatter_view - "+k)}}
function list_assemble_form_state_into_field(a,b,c,d,f,e,g,h){try{a=c;switch(d.type){case "list_boolean":if("options_onoff"==f.widget.type){var k=0,m=!0;$.each(d.settings.allowed_values,function(a,b){if(c==a&&0==k)return m=!1;k++});m||(h.use_delta=!1,h.use_wrapper=!1,a=null)}else console.log("WARNING: list_assemble_form_state_into_field - unknown widget ("+d.type+") on list_boolean");break;default:console.log("WARNING: list_assemble_form_state_into_field - unknown type ("+d.type+")")}return a}catch(n){console.log("list_assemble_form_state_into_field - "+
n)}}function list_views_exposed_filter(a,b,c,d,f){try{var e=d.options.group_info.widget;"select"==e?(empty(d.value)||(c.value=d.value[0]),c.options=d.value_options,c.required||(c.options.All="- Any -","undefined"===typeof c.value&&(c.value="All"))):dpm("WARNING: list_views_exposed_filter - unsupported widget ("+e+")")}catch(g){console.log("list_views_exposed_filter - "+g)}}
function number_field_formatter_view(a,b,c,d,f,e,g){try{var h={};"string"===typeof e&&(e={0:{value:e}});if(!empty(e)){var k="";empty(c.settings.prefix)||(k=c.settings.prefix);var m="";empty(c.settings.suffix)||(m=c.settings.suffix);$.each(e,function(a,b){h[a]={markup:k+b.value+m}})}return h}catch(n){console.log("number_field_formatter_view - "+n)}}
function number_field_widget_form(a,b,c,d,f,e,g,h){try{switch(h.type){case "number_integer":case "number_float":e[g].type="number";empty(d.settings.max)||(e[g].options.attributes.min=d.settings.min);empty(d.settings.max)||(e[g].options.attributes.max=d.settings.max);a=1;"number_float"==h.type&&(a=.01);e[g].options.attributes.step=a;break;default:console.log("number_field_widget_form - element type not supported ("+h.type+")")}}catch(k){console.log("number_field_widget_form - "+k)}}
function options_field_widget_form(a,b,c,d,f,e,g,h){try{switch(h.type){case "checkbox":1==e[g].default_value&&(e[g].checked=!0);break;case "list_boolean":switch(d.widget.type){case "options_onoff":e[g].type="checkbox";var k=null,m=null;if($.isArray(c.settings.allowed_values))for(var n in c.settings.allowed_values)null===k?k=n:m=n;else $.each(c.settings.allowed_values,function(a,b){null===k?k=a:m=a});e[g].options.attributes.off=k;e[g].options.attributes.on=m;"undefined"!==typeof e[g]&&e[g].value==
m&&(e[g].options.attributes.checked="checked");break;default:console.log("WARNING: options_field_widget_form list_boolean with unsupported type ("+d.widget.type+")")}break;case "select":case "list_text":case "list_float":case "list_integer":if(d){switch(d.widget.type){case "options_select":e[g].type="select";var p="- None -";e[g].required&&(p="- Select a value -");e[g].options[""]=p;empty(e[g].value)&&(e[g].value="");1!=c.cardinality&&(e[g].options.attributes["data-native-menu"]="false",e[g].options.attributes.multiple=
"multiple");break;case "options_buttons":h="checkboxes";1==c.cardinality&&(h="radios");e[g].type=h;break;default:return console.log("WARNING: options_field_widget_form - unsupported widget ("+d.widget.type+")"),!1}c&&c.settings.allowed_values&&($.each(c.settings.allowed_values,function(a,b){if("object"!==typeof b){if("undefined"!==typeof e[g].options[a])return!1;e[g].options[a]=b}}),d.default_value&&d.default_value[g]&&"undefined"!==typeof d.default_value[g].value&&(e[g].value=d.default_value[g].value))}break;
case "taxonomy_term_reference":e[g].type="hidden";var q=taxonomy_vocabulary_machine_name_load(c.settings.allowed_values[0].vocabulary);a=!1;if("options_select"==d.widget.type)a="select";else return console.log("WARNING: options_field_widget_form() - "+d.widget.type+" not yet supported for "+h.type+" form elements!"),!1;var r=e[g].id+"-"+a,p="- None -";e[g].required&&(p="- Select a value -");e[g].children.push({type:a,attributes:{id:r,onchange:"_theme_taxonomy_term_reference_onchange(this, '"+e[g].id+
"');"},options:{"":p}});var s={page_id:drupalgap_get_page_id(drupalgap_path_get()),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_taxonomy_term_reference_load_items",jqm_page_event_args:JSON.stringify({taxonomy_vocabulary:q,widget_id:r})};e[g].children.push({markup:drupalgap_jqm_page_event_script_code(s,c.field_name)})}}catch(t){console.log("options_field_widget_form - "+t)}}
function text_field_formatter_view(a,b,c,d,f,e,g){try{var h={};empty(e)||$.each(e,function(a,b){var c=b.value;"undefined"!==typeof b.safe_value&&(c=b.safe_value);h[a]={markup:c}});return h}catch(k){console.log("text_field_formatter_view - "+k)}}
function text_field_widget_form(a,b,c,d,f,e,g,h){try{a=null;switch(h.type){case "search":a="search";break;case "text":a="textfield";break;case "textarea":case "text_long":case "text_with_summary":case "text_textarea":a="textarea"}e[g].type=a}catch(k){console.log("text_field_widget_form - "+k)}}var image_phonegap_camera_options={};
function image_field_formatter_view(a,b,c,d,f,e,g){try{var h={};empty(e)||$.each(e,function(a,b){h[a]={theme:"image",alt:b.alt,title:b.title,path:drupalgap_image_path(b.uri)}});return h}catch(k){console.log("image_field_formatter_view - "+k)}}
function image_field_widget_form(a,b,c,d,f,e,g,h){try{e[g].type="hidden";if("undefined"!==typeof e[g].item&&e[g].item.fid){e[g].value=e[g].item.fid;var k=drupalgap_image_path(e[g].item.uri),m=theme("image",{path:k})+'<div class="filename">'+l(e[g].item.filename,k,{InAppBrowser:!0})+"</div>"}else{d="Take Photo";e[g].value&&(d=e[g].value);f="Browse";e[g].value2&&(f=e[g].value2);var n=e[g].id.replace(/-/g,"_");a=n+"_imagefield_source";b=n+"_imagefield_destination_type";h=n+"_imagefield_data";eval("var "+
a+" = null;");eval("var "+b+" = null;");eval("var "+h+" = null;");var p=e[g].id+"-browse-button",m='<div><div id="'+e[g].id+'-imagefield-msg"></div><img id="'+e[g].id+'-imagefield" style="display: none;" /><a href="#" data-role="button" data-icon="camera" id="'+e[g].id+'-button">'+d+'</a><a href="#" data-role="button" data-icon="grid" id="'+p+'">'+f+"</a></div>",m=m+'<script type="text/javascript">';d=n+"_imagefield_ready";m+='$("#'+drupalgap_get_page_id(drupalgap_path_get())+'").on("pageshow",function(){document.addEventListener("deviceready", '+
d+", false);});function "+d+"() {"+a+" = navigator.camera.PictureSourceType;"+b+" = navigator.camera.DestinationType;}";d=n+"_error";m+="function "+d+'(message) {if (message != "Camera cancelled." && message != "Selection cancelled." && message != "no image selected"){console.log("'+d+'");drupalgap_alert(message);}}';n+="_success";m+="function "+n+'(imageData) {_image_phonegap_camera_getPicture_success({field_name:"'+c.field_name+'", image:imageData, id:"'+e[g].id+'"})}';c=50;drupalgap.settings.camera.quality&&
(c=drupalgap.settings.camera.quality);m+='$("#'+e[g].id+'-button").on("click",function(){var photo_options = {quality: '+c+",destinationType: "+b+".DATA_URL,correctOrientation: true};navigator.camera.getPicture("+n+", "+d+", photo_options);});";m+='$("#'+p+'").on("click",function(){var browse_photo_options = {quality: '+c+",sourceType: "+a+".PHOTOLIBRARY,destinationType: "+b+".DATA_URL,correctOrientation: true};navigator.camera.getPicture("+n+", "+d+", browse_photo_options);});";m+="\x3c/script>"}e[g].children.push({markup:m})}catch(q){console.log("image_field_widget_form - "+
q)}}function _image_field_widget_form_remove_image(){try{alert("_image_field_widget_form_remove_image")}catch(a){console.log("_image_field_widget_form_remove_image - "+a)}}function image_fields_present_on_entity_type(a,b){try{var c=[],d=drupalgap_field_info_instances(a,b);if(!d)return!1;$.each(d,function(a,b){b.widget&&b.widget.type&&"image_image"==b.widget.type&&c.push(a)});return 0==c.length?!1:c}catch(f){console.log("image_fields_present_on_entity_type - "+f)}}
function image_form_alter(a,b,c){try{if(a.entity_type){var d=image_fields_present_on_entity_type(a.entity_type,a.bundle);d&&(a.image_fields=d,$.isArray(d)&&$.each(d,function(a,b){image_phonegap_camera_options[b]={0:null}}))}}catch(f){console.log("image_form_alter - "+f)}}
function image_style_url(a,b){try{var c=Drupal.settings.site_path+Drupal.settings.base_path+b;-1!=c.indexOf("public://")?c=c.replace("public://",Drupal.settings.file_public_path+"/styles/"+a+"/public/"):-1!=c.indexOf("private://")&&(c=c.replace("private://",Drupal.settings.file_private_path+"/styles/"+a+"/private/"));return c}catch(d){console.log("image_style_url - "+d)}}
function _image_phonegap_camera_getPicture_success(a){try{image_phonegap_camera_options[a.field_name]={0:a};var b=a.id+"-imagefield",c=document.getElementById(b);c.src="data:image/jpeg;base64,"+image_phonegap_camera_options[a.field_name][0].image;c.onload=function(){var a=this.width,d=this.height,g=a/drupalgap_max_width();c.width=a/g;c.height=d/g;$("#"+b).show()}}catch(d){console.log("_image_phonegap_camera_getPicture_success - "+d)}}
function _image_field_form_process(a,b,c){try{var d=language_default(),f=!1;$.each(a.image_fields,function(e,h){if(!image_phonegap_camera_options[h][0]||""!=b.values[h][d][0])return!1;var k=Drupal.user.uid+"_"+(new Date).valueOf()+".jpg",m={file:{file:image_phonegap_camera_options[h][0].image,filename:k,filepath:"public://"+k}};empty(Drupal.settings.file_private_path)||(m.file.filepath="private://"+k);drupalgap.loader="saving";f=!0;file_save(m,{async:!1,success:function(e){try{var f=drupalgap_form_get_element_id(h,
a.id);$("#"+f).val(e.fid);b.values[h][d][0]=e.fid;c.success&&c.success()}catch(g){console.log("_image_field_form_process - success - "+g)}}})});!f&&c.success&&c.success()}catch(e){console.log("_image_field_form_validate - "+e)}}function image_assemble_form_state_into_field(a,b,c,d,f,e,g,h){try{return h.value="fid",c}catch(k){console.log("image_assemble_form_state_into_field - "+k)}}
function menu_block_view(a,b){try{var c=drupalgap.menus[a],d=menu_container_id(a),f=null;b.attributes&&b.attributes["data-role"]&&(f=b.attributes["data-role"]);var e={};"undefined"!==typeof c.options&&"undefined"!==typeof c.options.wrap&&c.options.wrap&&c.options.wrap_options&&c.options.wrap_options.attributes&&(e=c.options.wrap_options.attributes);e.id=d;return"<div "+drupalgap_attributes(e)+"></div>"+drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",
jqm_page_event_callback:"menu_block_view_pageshow",jqm_page_event_args:JSON.stringify({menu_name:a,container_id:d,"data-role":f})},a)}catch(g){console.log("menu_block_view - "+g)}}
function menu_block_view_pageshow(a){try{var b="",c=drupalgap_path_get(),d=a.menu_name;if("primary_local_tasks"==d){var f=drupalgap_router_path_get();if(drupalgap.menu_links[f]){d=null;drupalgap.menu_links[f].parent&&(d=drupalgap.menu_links[f].parent);var e=null;drupalgap.menu_links[f].children?e=drupalgap.menu_links[f].children:d&&drupalgap.menu_links[d]&&drupalgap.menu_links[d].children&&(e=drupalgap.menu_links[d].children);var g=arg(),d=function(c){try{var d=[];e&&!empty(e)&&$.each(e,function(a,
b){!drupalgap.menu_links[b]||"MENU_DEFAULT_LOCAL_TASK"!=drupalgap.menu_links[b].type&&"MENU_LOCAL_TASK"!=drupalgap.menu_links[b].type||drupalgap_menu_access(b,null,c)&&d.push(drupalgap.menu_links[b])});if(1==d.length&&"MENU_DEFAULT_LOCAL_TASK"==d[0].type)b="";else{var g=[];$.each(d,function(a,b){var c=jQuery.extend(!0,{},b);c.options?c.options.attributes||(c.options.attributes={}):c.options={attributes:{}};var d=c.path;"MENU_DEFAULT_LOCAL_TASK"==c.type&&c.parent&&(d=c.parent,c.path=arg(null,c.parent).join("/"));
d==f&&(c.options.attributes["class"]||(c.options.attributes["class"]=""),c.options.attributes["class"]+=" ui-btn ui-btn-active ui-state-persist ");g.push(l(c.title,drupalgap_place_args_in_path(c.path),c.options))});0<g.length&&(b=theme("item_list",{items:g}))}$("#"+a.container_id).html(b).trigger("create");a["data-role"]&&"navbar"==a["data-role"]&&$("#"+a.container_id).navbar();var h=drupalgap.menus[a.menu_name];"undefined"===typeof h.options||"undefined"!==typeof h.options.wrap&&h.options.wrap||
$("#"+a.container_id).children().unwrap()}catch(k){console.log("menu_block_view_pageshow - success - "+k)}},h=!1,k=!1;e&&$.each(e,function(a,b){!drupalgap.menu_links[b]||"MENU_DEFAULT_LOCAL_TASK"!=drupalgap.menu_links[b].type&&"MENU_LOCAL_TASK"!=drupalgap.menu_links[b].type||(drupalgap_path_has_entity_arg(arg(null,b))&&(h=!0),"undefined"!==typeof drupalgap.menu_links[b].access_callback&&(k=!0))});if(h&&k){for(var m=!1,n=null,p=0;p<g.length;p++)if(is_int(parseInt(g[p]))){n=p;m=!0;break}if(m){var q=
g[0];"taxonomy"!=g[0]||"vocabulary"!=g[1]&&"term"!=g[1]||(q=g[0]+"_"+g[1]);q+="_load";if(drupalgap_function_exists(q)){var r=window[q],s=parseInt(g[n]);"item"==g[0]?(entity=r(g[1],g[2],s),d(entity)):(g=!1,"edit"==arg(2)&&(g=!0),r(s,{reset:g,success:d}))}else console.log("menu_block_view_pageshow - load function not implemented! "+q)}else d(null)}else d(null)}}else{r=!1;if(drupalgap.menus[d]&&drupalgap.menus[d].links){var r=drupalgap.menus[d],t=[];$.each(r.links,function(a,b){var d=jQuery.extend(!0,
{},b);d.options?d.options.attributes||(d.options.attributes={}):d.options={attributes:{}};d.path==c&&(d.options.attributes["class"]||(d.options.attributes["class"]=""),d.options.attributes["class"]+=" ui-btn ui-btn-active ui-state-persist ");t.push(l(d.title,d.path,d.options))});0<t.length&&(s=null,r.options&&r.options.attributes&&(s=drupalgap.menus[d].options.attributes),b=theme("item_list",{items:t,attributes:s}))}$("#"+a.container_id).html(b).trigger("create");s=!1;r&&"undefined"!==typeof r.options&&
"undefined"!==typeof r.options.wrap&&r.options.wrap&&(s=!0);s||$("#"+a.container_id).children().unwrap()}}catch(u){console.log("menu_block_view_pageshow - "+u)}}function menu_install(){try{var a=menu_list_system_menus();$.each(a,function(a,b){menu_save(b)})}catch(b){console.log("menu_install - "+b)}}function menu_popup_get_default_options(){return{attributes:{"data-role":"listview"},wrap:!0,wrap_options:{attributes:{"data-role":"popup"}}}}
function menu_region_link_get_data(a){try{var b=null;return b="undefined"===typeof a.region?a:a.region}catch(c){console.log("menu_region_link_get_data - "+c)}}function menu_region_link_get_side(a){try{var b="left";-1!=a.indexOf("ui-btn-right")&&(b="right");return b}catch(c){console.log("menu_region_link_get_side - "+c)}}function menu_save(a){try{drupalgap.menus[a.menu_name]=a}catch(b){console.log("menu_save - "+b)}}
function menu_load(a){try{return"undefined"!==typeof drupalgap.menus[a]?drupalgap.menus[a]:null}catch(b){console.log("menu_load - "+b)}}function menu_container_id(a,b){try{var c=null,c=b?b:drupalgap_get_page_id();return c+"_menu_"+a}catch(d){console.log("menu_container_id - "+d)}}
function collection_list_page(a,b){try{var c={collection_list:{theme:"jqm_item_list",title:"Collection"}},d=[],f=collection_load(a,b);f&&($.each(f,function(c,e){d.push(l(e.name,"mvc/item/"+a+"/"+b+"/"+c))}),c.collection_list.items=d);return c}catch(e){console.log("collection_list_page - "+e)}}function collection_load(a,b){try{return JSON.parse(window.localStorage.getItem(mvc_get_collection_key("collection",a,b)))}catch(c){console.log("collection_load - "+c)}}
function collection_save(a,b,c){try{window.localStorage.setItem(mvc_get_collection_key("collection",a,b),JSON.stringify(c))}catch(d){console.log("collection_save - "+d)}}function mvc_get_collection_key(a,b,c){return"mvc_"+a+"_"+b+"_"+c}
function mvc_install(){try{for(var a=module_implements("mvc_model"),b=0;b<a.length;b++){var c=a[b],d=module_invoke(c,"mvc_model");d&&(drupalgap.mvc.models[c]||(drupalgap.mvc.models[c]={}),$.each(d,function(a,b){b.fields.id={type:"hidden",title:"ID",required:!1};b.fields.module={type:"hidden",title:"Module",required:!0,default_value:c};b.fields.type={type:"hidden",title:"Model Type",required:!0,default_value:a};drupalgap.mvc.models[c][a]=b;var d=mvc_get_collection_key("collection",c,a);window.localStorage.getItem(d)||
(window.localStorage.setItem(d,"[]"),window.localStorage.setItem(mvc_get_collection_key("settings",c,a),'{"auto_increment":0}'))}))}}catch(f){console.log("mvc_install - "+f)}}function mvc_menu(){return{"mvc/collection/list/%/%":{page_callback:"collection_list_page",page_arguments:[3,4]},"mvc/item/%/%/%":{page_callback:"item_view_page",page_arguments:[2,3,4]},"mvc/item-add/%/%":{title:"Add",page_callback:"drupalgap_get_form",page_arguments:["item_create_form",2,3]}}}
function mvc_model_system_fields(){return["id","module","type"]}function model_load(a,b){try{return"undefined"===drupalgap.mvc.models[a]||"undefined"===drupalgap.mvc.models[a][b]?!1:drupalgap.mvc.models[a][b]}catch(c){console.log("model_load - "+c)}}function item_create_form(a,b,c,d){try{var f=model_load(c,d);f&&(a.elements=f.fields,a.buttons.cancel=drupalgap_form_cancel_button(),a.elements.submit={type:"submit",value:"Create"});return a}catch(e){console.log("item_create_form - "+e)}}
function item_create_form_submit(a,b){try{if(item_save(b.values)){var c="mvc/collection/list/"+b.values.module+"/"+b.values.type;a.action&&(c=a.action);drupalgap_goto(c,{reloadPage:!0})}else drupalgap_alert("item_create_form_submit - failed to save item!")}catch(d){console.log("item_create_form_submit - "+d)}}function item_load(a,b,c){try{var d=!1,f=collection_load(a,b);f&&"undefined"!==typeof f[c]&&(d=f[c]);return d}catch(e){console.log("item_load - "+e)}}
function item_save(a){try{if("undefined"===typeof a)return!1;var b=mvc_get_collection_key("settings",a.module,a.type),c=JSON.parse(window.localStorage.getItem(b));a.id||(a.id=c.auto_increment);var d=collection_load(a.module,a.type);d[a.id]=a;collection_save(a.module,a.type,d);c.auto_increment=a.id+1;window.localStorage.setItem(b,JSON.stringify(c));return!0}catch(f){console.log("item_save - "+f)}}
function item_view_page(a,b,c){try{var d="",f=model_load(a,b);f&&(d=theme("item",{model:f,item:c}));return d}catch(e){console.log("item_view_page - "+e)}}function node_access(a){try{return a.uid==Drupal.user.uid&&user_access("edit own "+a.type+" content")||user_access("edit any "+a.type+" content")?!0:!1}catch(b){console.log("node_access - "+b)}}
function node_add_page(){try{var a={header:{markup:"<h2>Create Content</h2>"},node_type_listing:{theme:"jqm_item_list",title:"Content Types",attributes:{id:"node_type_listing_items"}}},b=[];$.each(Drupal.user.content_types_user_permissions,function(a,c){c.create&&b.push(l(drupalgap.content_types_list[a].name,"node/add/"+a))});a.node_type_listing.items=b;return a}catch(c){console.log("node_add_page - "+c)}}
function node_add_page_by_type(a){try{return drupalgap_get_form("node_edit",{type:a})}catch(b){console.log("node_add_page_by_type - "+b)}}function node_add_page_by_type_title(a,b){try{return a.call(null,"Create "+drupalgap.content_types_list[b].name)}catch(c){console.log("node_add_page_by_type_title - "+c)}}
function node_edit(a,b,c){try{return a.entity_type="node",a.bundle=c.type,drupalgap_entity_add_core_fields_to_form("node",c.type,a,c),drupalgap_field_info_instances_add_to_form("node",c.type,a,c),a.elements.submit={type:"submit",value:"Save"},a.buttons.cancel=drupalgap_form_cancel_button(),c&&c.nid&&(a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("node",c.nid)),a}catch(d){console.log("node_edit - "+d)}}
function node_edit_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("node_edit_submit - "+d)}}
function node_menu(){return{node:{title:"Content",page_callback:"node_page",pageshow:"node_page_pageshow"},"node/add":{title:"Add content",page_callback:"node_add_page"},"node/add/%":{title:"Add content",title_callback:"node_add_page_by_type_title",title_arguments:[2],page_callback:"node_add_page_by_type",page_arguments:[2],options:{reloadPage:!0}},"node/%":{title:"Node",page_callback:"node_page_view",page_arguments:[1],pageshow:"node_page_view_pageshow",title_callback:"node_page_title",title_arguments:[1]},
"node/%/view":{title:"View",type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"node/%/edit":{title:"Edit",page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["node_edit","node",1],weight:0,type:"MENU_LOCAL_TASK",access_callback:"node_access",access_arguments:[1],options:{reloadPage:!0}}}}
function node_page(){return{create_content:{theme:"button_link",path:"node/add",text:"Create Content"},node_listing:{theme:"jqm_item_list",title:"Content List",items:[],attributes:{id:"node_listing_items"}}}}
function node_page_pageshow(){try{views_datasource_get_view_result("drupalgap/views_datasource/drupalgap_content",{success:function(a){var c=[];$.each(a.nodes,function(a,b){c.push(l(b.node.title,"node/"+b.node.nid))});drupalgap_item_list_populate("#node_listing_items",c)}})}catch(a){console.log("node_page_pageshow - "+a)}}
function node_page_view(a){try{if(a)return{container:_drupalgap_entity_page_container("node",a,"view")};drupalgap_error("No node id provided!")}catch(b){console.log("node_page_view - "+b)}}
function node_page_view_pageshow(a){try{node_load(a,{success:function(a){var b=language_default(),f=a.title;a.title_field&&a.title_field[b]&&(f=a.title_field[b][0].safe_value);var e={theme:"node",node:a,title:{markup:f},content:{markup:a.content}};if("undefined"===typeof a.comment)_drupalgap_entity_page_container_inject("node",a.nid,"view",e);else if(0!=a.comment){if(1==a.comment||2==a.comment){var g="";2==a.comment&&(g=drupalgap_get_form("comment_edit",{nid:a.nid},a));0!=a.comment_count?comment_index({parameters:{nid:a.nid}},
{success:function(b){try{var d="";$.each(b,function(a,b){d+=theme("comment",{comment:b})});e.content.markup+=theme("comments",{node:a,comments:d});2==a.comment&&(e.content.markup+=g);_drupalgap_entity_page_container_inject("node",a.nid,"view",e)}catch(f){console.log("node_page_view_pageshow - comment_index - "+f)}}}):(2==a.comment&&(e.content.markup+=theme("comments",{node:a}),e.content.markup+=g),_drupalgap_entity_page_container_inject("node",a.nid,"view",e))}}else e.content.markup+=theme("comments",
{node:a}),_drupalgap_entity_page_container_inject("node",a.nid,"view",e)}})}catch(b){console.log("node_page_view_pageshow - "+b)}}function node_page_title(a,b){try{var c="";node_load(b,{success:function(b){b&&b.title&&(c=b.title);a.call(null,c)}})}catch(d){console.log("node_page_title - "+d)}}function node_theme(){return{node:{template:"node"}}}function search_block_info(){return{search:{delta:"search",module:"search"}}}
function search_block_view(a,b){try{var c="";"search"==a&&user_access("search content")&&(c=drupalgap_get_form("search_block_form"));return c}catch(d){console.log("search_block_view - "+d)}}function search_menu(){return{"search/%/%":{title:"Search",page_callback:"drupalgap_get_form",pageshow:"search_form_pageshow",page_arguments:["search_form"],access_arguments:["search content"]}}}
function search_block_form(a,b){try{return a.elements.type={type:"hidden",default_value:"node"},a.elements.keys={type:"search",title:"",title_placeholder:!0,required:!0,default_value:""},a.options.attributes.onsubmit="_drupalgap_form_submit('"+a.id+"'); return false;",a}catch(c){console.log("search_block_form - "+c)}}function search_block_form_submit(a,b){try{drupalgap_goto("search/"+b.values.type+"/"+b.values.keys)}catch(c){console.log("search_block_form_submit - "+c)}}
function search_form(a,b){try{var c=arg(1),d=arg(2);a.elements.type={type:"hidden",default_value:c?c:"node"};a.elements.keys={type:"textfield",title:"Enter your keywords",required:!0,default_value:d?d:""};a.elements.submit={type:"submit",value:"Go",options:{attributes:{"data-icon":"search"}}};a.suffix+=theme("jqm_item_list",{title:"Search results",items:[],options:{attributes:{id:"search_form_results"}}});return a}catch(f){console.log("search_form - "+f)}}
function search_form_submit(a,b){try{var c=b.values.type,d=b.values.keys;switch(c){case "node":search_node(d,{success:function(a){var b=[];$.each(a,function(a,c){var d=theme("search_result_node",c);b.push(d)});drupalgap_item_list_populate("#search_form_results",b)}});break;default:console.log("search_form_submit - unsupported type ("+c+")")}}catch(f){console.log("search_form_submit - "+f)}}
function search_form_pageshow(a){try{var b=arg(1),c=arg(2);switch(b){case "node":search_node(c,{success:function(a){var b=[];$.each(a,function(a,c){var d=theme("search_result_node",c);b.push(d)});drupalgap_item_list_populate("#search_form_results",b)}});break;default:console.log("search_form_pageshow - unsupported type ("+b+")")}}catch(d){console.log("search_form_pageshow - "+d)}}
function search_node(a,b){try{b.method="GET",b.path="search_node/retrieve.json&keys="+encodeURIComponent(a),b.service="search_node",b.resource="retrieve",Drupal.services.call(b)}catch(c){console.log("search_node - "+c)}}function theme_search_result_node(a){try{return l("<h2>"+a.title+"</h2><p>"+a.snippet+"</p>","node/"+a.node.nid)}catch(b){console.log("theme_search_result_node - "+b)}}
function drupalgap_services_get_entity_resource(a){try{return console.log("WARNING: drupalgap_services_get_entity_resource() is deprecated! Use services_get_resource_function_for_entity() instead."),drupalgap.services[a]?drupalgap.services[a]:null}catch(b){console.log("drupalgap_services_get_entity_resource - "+b)}}
function services_get_resource_function_for_entity(a,b){var c=a+"_";switch(b){case "create":c+="save";break;case "retrieve":c+="load";break;case "update":c+="save";break;case "delete":c+="delete";break;default:c+="load"}return c}
function drupalgap_service_resource_extract_results(a){try{if("system"==a.service&&"connect"==a.resource){a.data.user.permissions=[];var b=a.data.user_permissions,c;for(c in b)a.data.user.permissions.push(b[c]);$.each(a.data.content_types_list,function(a,b){drupalgap.content_types_list[b.type]=b});a.data.user.content_types_user_permissions=a.data.content_types_user_permissions;drupalgap.site_settings=a.data.site_settings;"undefined"!==typeof a.data.date_formats&&(drupalgap.date_formats=a.data.date_formats);
"undefined"!==typeof a.data.date_types&&(drupalgap.date_types=a.data.date_types)}}catch(d){console.log("drupalgap_service_resource_extract_results - "+d)}}
function drupalgap_services_rss_extract_items(a){try{var b=null,c=$(a);c&&(b=[],c.find("item").each(function(){var a=$(this),a={title:a.find("title").text(),link:a.find("link").text(),description:a.find("description").text(),pubDate:a.find("pubDate").text(),author:a.find("author").text()};b.push(a)}));return b}catch(d){console.log("drupalgap_services_rss_extract_items - "+d)}}
function system_block_info(){var a={main:{delta:"main",module:"system"},messages:{delta:"messages",module:"system"},logo:{delta:"logo",module:"system"},logout:{delta:"logout",module:"system"},title:{delta:"title",module:"system"},powered_by:{delta:"powered_by",module:"system"},help:{delta:"help",module:"system"}},b=menu_list_system_menus();$.each(b,function(b,d){var f=d.menu_name;a[f]={name:f,delta:f,module:"menu"}});return a}
function system_block_view(a){try{switch(a){case "main":return drupalgap_render_page();case "messages":var b="";if(0==drupalgap.messages.length)return b;$.each(drupalgap.messages,function(a,c){b+='<div class="messages '+c.type+'">'+c.message+"</div>"});drupalgap.messages=[];return b;case "logo":return drupalgap.settings.logo?'<div class="logo">'+l(theme("image",{path:drupalgap.settings.logo}),"")+"</div>":"";case "logout":return Drupal.user.uid?theme("logout"):"";case "title":return'<h1 id="'+system_title_block_id(drupalgap_path_get())+
'"></h1>';case "powered_by":return'<p style="text-align: center;">Powered by: '+l("DrupalGap","http://www.drupalgap.org",{InAppBrowser:!0})+"</p>";case "help":return l("Help","http://www.drupalgap.org/support");default:return""}}catch(c){console.log("system_block_info - "+c)}}
function system_menu(){return{dashboard:{title:"Dashboard",page_callback:"system_dashboard_page"},error:{title:"Error",page_callback:"system_error_page"},offline:{title:"Offline",page_callback:"system_offline_page"},401:{title:"401 - Not Authorized",page_callback:"system_401_page"},404:{title:"404 - Not Found",page_callback:"system_404_page"}}}function system_401_page(a){return"Sorry, you are not authorized to view this page."}
function system_404_page(a){return"Sorry, the page you requested was not found."}
function system_dashboard_page(){try{var a={};a.site_info={markup:'<h4 style="text-align: center;">'+Drupal.settings.site_path+"</h4>"};a.welcome={markup:'<h2 style="text-align: center;">Welcome to DrupalGap</h2><p style="text-align: center;">The open source application development kit for Drupal!</p>'};drupalgap.settings.logo&&(a.logo={markup:"<center>"+theme("image",{path:drupalgap.settings.logo})+"</center>"});a.get_started={theme:"button_link",text:"Getting Started Guide",path:"http://www.drupalgap.org/get-started",
options:{InAppBrowser:!0}};a.support={theme:"button_link",text:"Support",path:"http://www.drupalgap.org/support",options:{InAppBrowser:!0}};return a}catch(b){console.log("system_dashboard_page - "+b)}}function system_error_page(){return{info:{markup:"<p>An unexpected error has occurred!</p>"}}}
function system_offline_page(){try{return{message:{markup:"<h2>Failed Connection</h2><p>Oops! We couldn't connect to:</p><p>"+Drupal.settings.site_path+"</p>"},try_again:{theme:"button",text:"Try Again",attributes:{onclick:"javascript:offline_try_again();"}},footer:{markup:"<p>Check your device's network settings and try again.</p>"}}}catch(a){console.log("system_offline_page - "+a)}}
function offline_try_again(){try{var a=drupalgap_check_connection();if(drupalgap.online)system_connect({success:function(){drupalgap_goto("")}});else return drupalgap_alert("Sorry, no connection found! ("+a+")",{title:"Offline"}),!1}catch(b){console.log("offline_try_again - "+b)}}function system_regions_list(){return["header","content","footer"]}
function system_settings_form(a,b){try{return a.elements.submit||(a.elements.submit={type:"submit",value:"Save configuration"}),a.buttons.cancel||(a.buttons.cancel=drupalgap_form_cancel_button()),a.submit.push("system_settings_form_submit"),a}catch(c){console.log("system_settings_form - "+c)}}
function system_settings_form_submit(a,b){try{b.values&&$.each(b.values,function(a,b){variable_set(a,b)}),drupalgap_alert("The configuration options have been saved.")}catch(c){console.log("system_settings_form_submit - "+c)}}function system_title_block_id(a){try{return"drupalgap_page_title_"+drupalgap_get_page_id(a)}catch(b){console.log("system_title_block_id - "+b)}}
function system_logout_block_access_callback(a){try{var b=arg(null,a.path);return b&&2==b.length&&"user"==b[0]&&b[1]==Drupal.user.uid?!0:!1}catch(c){console.log("system_logout_block_access_callback - "+c)}}function user_access(a,b){try{var c;c=b?b:Drupal.user;if(1==c.uid)return!0;var d=!1;$.each(c.permissions,function(b,c){if(c.permission==a)return d=!0,!1});return d}catch(f){console.log("user_access - "+f)}}
function user_edit_access(a){try{return Drupal.user.uid==a.uid||user_access("administer users")?!0:!1}catch(b){console.log("user_edit_access - "+b)}}function user_listing(){return{user_listing:{theme:"jqm_item_list",title:"Users",items:[],attributes:{id:"user_listing_items"}}}}
function user_listing_pageshow(){try{views_datasource_get_view_result("drupalgap/views_datasource/drupalgap_users",{success:function(a){var c=[];$.each(a.users,function(a,b){c.push(l(b.user.name,"user/"+b.user.uid))});drupalgap_item_list_populate("#user_listing_items",c)}})}catch(a){console.log("user_listing_pageshow - "+a)}}
function user_login_form(a,b){try{return a.entity_type="user",a.bundle=null,a.elements.name={type:"textfield",title:"Username",title_placeholder:!0,required:!0},a.elements.pass={type:"password",title:"Password",title_placeholder:!0,required:!0},a.elements.submit={type:"submit",value:"Login"},user_register_access()&&(a.buttons.create_new_account={title:"Create new account",attributes:{onclick:"drupalgap_goto('user/register')"}}),a}catch(c){console.log("user_login_form - "+c)}}
function user_login_form_submit(a,b){try{user_login(b.values.name,b.values.pass,{success:function(a){drupalgap_goto(drupalgap.settings.front)}})}catch(c){console.log("user_login_form_submit - "+c)}}function user_logout_callback(){return"<p>Logging out...</p>"}function user_logout_pagechange(){try{user_logout({success:function(a){drupalgap_goto(drupalgap.settings.front)}})}catch(a){console.log("user_logout_pagechange - "+a)}}
function user_menu(){return{user:{page_callback:"user_page"},"user/login":{title:"Login",page_callback:"drupalgap_get_form",page_arguments:["user_login_form"],options:{reloadPage:!0}},"user/logout":{title:"Logout",page_callback:"user_logout_callback",pagechange:"user_logout_pagechange",options:{reloadPage:!0}},"user/register":{title:"Register",page_callback:"drupalgap_get_form",page_arguments:["user_register_form"],access_callback:"user_register_access",options:{reloadPage:!0}},"user/%":{title:"My account",
title_callback:"user_view_title",title_arguments:[1],page_callback:"user_view",pageshow:"user_view_pageshow",page_arguments:[1]},"user/%/view":{title:"View",type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"user/%/edit":{title:"Edit",page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["user_profile_form","user",1],access_callback:"user_edit_access",access_arguments:[1],weight:0,type:"MENU_LOCAL_TASK",options:{reloadPage:!0}},"user-listing":{title:"Users",page_callback:"user_listing",
access_arguments:["access user profiles"],pageshow:"user_listing_pageshow"}}}function user_page(){return"user_page()"}function user_register_access(){try{switch(drupalgap.site_settings.user_register){case "0":return!1;case "1":case "2":return!0}}catch(a){console.log("user_register_access - "+a)}}
function user_register_form(a,b){try{return a.entity_type="user",a.bundle=null,a.elements.name={type:"textfield",title:"Username",title_placeholder:!0,required:!0,description:"Spaces are allowed; punctuation is not allowed except for periods, hyphens, apostrophes, and underscores."},a.elements.mail={type:"email",title:"E-mail address",title_placeholder:!0,required:!0},drupalgap.site_settings.user_email_verification||(a.elements.conf_mail={type:"email",title:"Confirm e-mail address",title_placeholder:!0,
required:!0},a.elements.pass={type:"password",title:"Password",title_placeholder:!0,required:!0},a.elements.pass2={type:"password",title:"Confirm password",title_placeholder:!0,required:!0}),drupalgap_field_info_instances_add_to_form("user",null,a,null),a.user_register={user_mail_register_no_approval_required_body:"Registration complete!",user_mail_register_pending_approval_required_body:"Registration complete, waiting for administrator approval.",user_mail_register_email_verification_body:"Registration complete, check your e-mail inbox to verify the account."},
a.auto_user_login=!0,a.elements.submit={type:"submit",value:"Create new account"},a}catch(c){console.log("user_register_form - "+c)}}
function user_register_form_validate(a,b){try{drupalgap.site_settings.user_email_verification||b.values.pass==b.values.pass2||drupalgap_form_set_error("pass","Passwords do not match!"),empty(b.values.mail)||empty(b.values.conf_mail)||b.values.mail==b.values.conf_mail||drupalgap_form_set_error("mail","E-mail addresses do not match!")}catch(c){console.log("user_register_form_validate - "+c)}}
function user_register_form_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);user_register(c,{success:function(b){drupalgap.site_settings.user_email_verification?(drupalgap_alert(a.user_register.user_mail_register_email_verification_body),drupalgap_goto("")):"2"==drupalgap.site_settings.user_register?(drupalgap_alert(a.user_register.user_mail_register_pending_approval_required_body),drupalgap_goto("")):(drupalgap_alert(a.user_register.user_mail_register_no_approval_required_body),
a.auto_user_login?user_login(c.name,c.pass,{success:function(a){drupalgap_goto("")}}):drupalgap_goto(""))},error:function(c,d,g){(c=_drupalgap_form_submit_response_errors(a,b,c,d,g))&&drupalgap_alert(c)}})}catch(d){console.log("user_register_form_submit - "+d)}}
function user_profile_form(a,b,c){try{return a.entity_type="user",a.bundle=null,drupalgap_entity_add_core_fields_to_form("user",null,a,c),drupalgap_field_info_instances_add_to_form("user",null,a,c),Drupal.user.uid==c.uid&&(a.elements.current_pass={title:"Current password",type:"password",description:"Enter your current password to change the E-mail address or Password."}),a.elements.pass_pass1={title:"Password",type:"password"},a.elements.pass_pass2={title:"Confirm password",type:"password",description:"To change the current user password, enter the new password in both fields."},
a.elements.submit={type:"submit",value:"Save"},a.buttons.cancel={title:"Cancel",attributes:{onclick:"javascript:drupalgap_back();"}},a}catch(d){console.log("user_profile_form - "+d)}}function user_profile_form_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("user_profile_form_submit - "+d)}}
function user_services_postprocess(a,b){try{if("user"==a.service&&in_array(a.resource,["login","logout","register"])&&b.responseText){var c=JSON.parse(b.responseText);if($.isArray(c)){var d="";$.each(c,function(a,b){d+=b+"\n"});""!=d&&drupalgap_alert(d)}}}catch(f){console.log("user_services_postprocess - "+f)}}function user_theme(){return{user_picture:{template:"user-picture"},user_profile:{template:"user-profile"}}}
function user_view(a){try{if(a)return{container:_drupalgap_entity_page_container("user",a,"view")};console.log("user_view - No user id provided!")}catch(b){console.log("user_view - "+b)}}
function user_view_pageshow(a){try{user_load(a,{success:function(a,b,f){var e="full",g=null;b&&(e=b);f&&(g=f);g||(g=language_default());a&&(b={theme:"user_profile",account:a,view_mode:e,language:g,name:{markup:a.name},created:{markup:(new Date(1E3*parseInt(a.created))).toDateString()}},"undefined"!==typeof a.content&&(b.content={markup:a.content}),a.picture&&a.picture.fid&&(b.picture={theme:"image",path:a.picture.url}),_drupalgap_entity_page_container_inject("user",a.uid,"view",b))}})}catch(b){console.log("user_view_pageshow - "+
b)}}function user_view_title(a,b){try{user_load(b,{success:function(b){a.call(null,b.name)}})}catch(c){console.log("user_view_title - "+c)}}function drupalgap_user_has_role(a,b){try{var c=!1,d=null,d=b?b:Drupal.user;$.each(d.roles,function(b,d){if(a==d)return c=!0,!1});return c}catch(f){console.log("drupalgap_user_has_role - "+f)}}var _taxonomy_term_reference_terms={};
function drupalgap_taxonomy_vocabularies_extract(a){try{var b=!1;a&&0<a.length&&(b={},$.each(a,function(a,c){b[c.machine_name]=c}));return b}catch(c){console.log("drupalgap_taxonomy_vocabularies_extract - "+c)}}
function taxonomy_field_formatter_view(a,b,c,d,f,e,g){try{var h={};"string"===typeof e&&(e={0:{tid:e}});"undefined"!==typeof e[language_default()]&&(e=e[language_default()]);empty(e)||$.each(e,function(a,b){var c=b.tid;b.name&&(c=b.name);h[a]={theme:"button_link",text:c,path:"taxonomy/term/"+b.tid}});return h}catch(k){console.log("taxonomy_field_formatter_view - "+k)}}
function taxonomy_field_widget_form(a,b,c,d,f,e,g,h){try{e[g].type="hidden";var k=e[g].id+"-list";e[g].children.push({theme:"item_list",items:[],attributes:{id:k,"data-role":"listview","data-filter":"true","data-inset":"true","data-filter-placeholder":"..."}});var m=taxonomy_vocabulary_machine_name_load(c.settings.allowed_values[0].vocabulary).vid;e[g].children.push({markup:'<script type="text/javascript">$("#'+k+'").on("filterablebeforefilter",function(e, d) {_taxonomy_field_widget_form_autocomplete("'+
e[g].id+'", '+m+", this, e, d);});\x3c/script>"})}catch(n){console.log("taxonomy_field_widget_form - "+n)}}var _taxonomy_field_widget_form_autocomplete_input=null;
function _taxonomy_field_widget_form_autocomplete(a,b,c,d,f){try{var e=$(c),g=$(f.input),h=g.val(),k="";_taxonomy_field_widget_form_autocomplete_input=g;$(_taxonomy_field_widget_form_autocomplete_input).on("change",function(){$("#"+a).val($(this).val())});e.html("");h&&0<h.length&&(e.html('<li><div class="ui-loader"><span class="ui-icon ui-icon-loading"></span></div></li>'),e.listview("refresh"),taxonomy_term_index({fields:["tid","name"],parameters:{vid:b,name:"%"+h+"%"},parameters_op:{name:"like"}},
{success:function(c){0!=c.length&&($.each(c,function(c,d){var f={tid:d.tid,vid:b,name:d.name,onclick:"_taxonomy_field_widget_form_click('"+a+"', '"+e.attr("id")+"', this)"};k+="<li "+drupalgap_attributes(f)+">"+d.name+"</li>"}),e.html(k),e.listview("refresh"),e.trigger("updatelayout"))}}))}catch(m){console.log("_taxonomy_field_widget_form_autocomplete - "+m)}}
function _taxonomy_field_widget_form_click(a,b,c){try{var d=$(c).attr("name");$("#"+a).val(d);$(_taxonomy_field_widget_form_autocomplete_input).val($(c).attr("name"));$("#"+b).html("")}catch(f){console.log("_taxonomy_field_widget_form_click - "+f)}}
function taxonomy_assemble_form_state_into_field(a,b,c,d,f,e,g,h){try{a=null;switch(f.widget.type){case "taxonomy_autocomplete":h.use_wrapper=!1;a=c;break;case "options_select":a=c}return a}catch(k){console.log("taxonomy_assemble_form_state_into_field - "+k)}}
function taxonomy_menu(){return{"taxonomy/vocabularies":{title:"Taxonomy",page_callback:"taxonomy_vocabularies_page",pageshow:"taxonomy_vocabularies_pageshow"},"taxonomy/vocabulary/%":{title:"Taxonomy vocabulary",page_callback:"taxonomy_vocabulary_page",page_arguments:[2],pageshow:"taxonomy_vocabulary_pageshow"},"taxonomy/vocabulary/%/view":{title:"View",type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"taxonomy/vocabulary/%/edit":{title:"Edit",page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",
page_arguments:["taxonomy_form_vocabulary","taxonomy_vocabulary",2],weight:0,type:"MENU_LOCAL_TASK",access_arguments:["administer taxonomy"],options:{reloadPage:!0}},"taxonomy/term/%":{title:"Taxonomy term",page_callback:"taxonomy_term_page",page_arguments:[2],pageshow:"taxonomy_term_pageshow"},"taxonomy/term/%/view":{title:"View",type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"taxonomy/term/%/edit":{title:"Edit",page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["taxonomy_form_term",
"taxonomy_term",2],weight:0,type:"MENU_LOCAL_TASK",access_arguments:["administer taxonomy"],options:{reloadPage:!0}}}}
function taxonomy_form_vocabulary(a,b,c){try{return a.entity_type="taxonomy_vocabulary",a.bundle=null,a.action="taxonomy/vocabularies",drupalgap_entity_add_core_fields_to_form("taxonomy_vocabulary",null,a,c),a.elements.submit={type:"submit",value:"Save"},a.buttons.cancel=drupalgap_form_cancel_button(),c&&c.vid&&user_access("administer taxonomy")&&(a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("taxonomy_vocabulary",c.vid)),a}catch(d){console.log("taxonomy_form_vocabulary - "+d)}}
function taxonomy_form_vocabulary_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("taxonomy_form_vocabulary_submit - "+d)}}
function taxonomy_form_term(a,b,c){try{return a.entity_type="taxonomy_term",a.bundle=null,a.action="taxonomy/vocabularies",drupalgap_entity_add_core_fields_to_form("taxonomy_term",null,a,c),a.elements.submit={type:"submit",value:"Save"},a.buttons.cancel=drupalgap_form_cancel_button(),c&&c.tid&&user_access("administer taxonomy")&&(a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("taxonomy_term",c.tid)),a}catch(d){console.log("taxonomy_form_term - "+d)}}
function taxonomy_form_term_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("taxonomy_form_term_submit - "+d)}}
function taxonomy_term_page(a){try{if(a)return{container:_drupalgap_entity_page_container("taxonomy_term",a,"view"),taxonomy_term_node_listing:{theme:"jqm_item_list",items:[],attributes:{id:"taxonomy_term_node_listing_items_"+a}}};console.log("taxonomy_term_pageshow - No term id provided!")}catch(b){console.log("taxonomy_term_pageshow - "+b)}}
function taxonomy_term_pageshow(a){try{taxonomy_term_load(a,{success:function(a){_drupalgap_entity_page_container_inject("taxonomy_term",a.tid,"view",{name:{markup:"<h2>"+a.name+"</h2>"},description:{markup:"<p>"+(a.description?a.description:"")+"</p>"}});taxonomy_term_selectNodes(a.tid,{success:function(b){var f=[];$.each(b,function(a,b){f.push(l(b.title,"node/"+b.nid))});drupalgap_item_list_populate("#taxonomy_term_node_listing_items_"+a.tid,f)}})}})}catch(b){console.log("taxonomy_term_pageshow - "+
b)}}function taxonomy_term_selectNodes(a,b){try{b.method="POST",b.path="taxonomy_term/selectNodes.json",b.service="taxonomy_term",b.resource="selectNodes",b.data=JSON.stringify({tid:a}),Drupal.services.call(b)}catch(c){console.log("taxonomy_term_selectNodes - "+c)}}function taxonomy_vocabularies_page(){return{vocabulary_listing:{theme:"jqm_item_list",title:"Vocabularies",items:[],attributes:{id:"vocabulary_listing_items"}}}}
function taxonomy_vocabularies_pageshow(){try{taxonomy_vocabulary_index(null,{success:function(a){var c=[];$.each(a,function(a,b){c.push(l(b.name,"taxonomy/vocabulary/"+b.vid))});drupalgap_item_list_populate("#vocabulary_listing_items",c)}})}catch(a){console.log("taxonomy_vocabularies_pageshow - "+a)}}
function taxonomy_vocabulary_page(a){try{if(a)return{container:_drupalgap_entity_page_container("taxonomy_vocabulary",a,"view"),taxonomy_term_listing:{theme:"jqm_item_list",title:"Terms",items:[],attributes:{id:"taxonomy_term_listing_items_"+a}}};console.log("taxonomy_vocabulary_page - No vocabulary id provided!")}catch(b){console.log("taxonomy_vocabulary_page - "+b)}}
function taxonomy_vocabulary_pageshow(a){try{taxonomy_vocabulary_load(a,{success:function(b){_drupalgap_entity_page_container_inject("taxonomy_vocabulary",b.vid,"view",{name:{markup:"<h2>"+b.name+"</h2>"},description:{markup:"<p>"+b.description+"</p>"}});taxonomy_term_index({parameters:{vid:a}},{success:function(b){if(0!=b.length){var c=[];$.each(b,function(a,b){c.push(l(b.name,"taxonomy/term/"+b.tid))});drupalgap_item_list_populate("#taxonomy_term_listing_items_"+a,c)}}})}})}catch(b){console.log("taxonomy_vocabulary_pageshow - "+
b)}}function taxonomy_vocabulary_get_vid_from_name(a){try{var b=taxonomy_vocabulary_machine_name_load(a);return b?b.vid:!1}catch(c){console.log("taxonomy_vocabulary_get_vid_from_name - "+c)}}function taxonomy_vocabulary_machine_name_load(a){try{return drupalgap.taxonomy_vocabularies&&drupalgap.taxonomy_vocabularies[a]?drupalgap.taxonomy_vocabularies[a]:!1}catch(b){console.log("taxonomy_vocabulary_machine_name_load - "+b)}}
function theme_taxonomy_term_reference(a){try{var b="",c=!0;"undefined"!==typeof a.render_input_element&&(c=a.render_input_element);c&&(a.attributes.type="hidden",b+="<input "+drupalgap_attributes(a.attributes)+"/>");c=!1;"undefined"!==typeof a.required&&(c=a.required);var d=!1;"undefined"!==typeof a.exposed&&(d=a.exposed);var f=taxonomy_vocabulary_machine_name_load(a.field_info_field.settings.allowed_values[0].vocabulary),e=a.field_info_instance.widget.type;"options_select"==e&&(e="select");var g=
"theme_"+e,h=a.attributes.id+"-"+e;if(drupalgap_function_exists(g)){var k=window[g],m={attributes:{id:h,onchange:"_theme_taxonomy_term_reference_onchange(this, '"+a.attributes.id+"');"}},e=!1;_taxonomy_term_reference_terms[a.attributes.id]&&(e=!0,m.options=_taxonomy_term_reference_terms[a.attributes.id]);"undefined"!==typeof a.value?m.value=a.value:c||(m.value=d?"All":"");b+=k.call(null,m);if(!e)var n={page_id:drupalgap_get_page_id(drupalgap_path_get()),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_taxonomy_term_reference_load_items",
jqm_page_event_args:JSON.stringify({taxonomy_vocabulary:f,element_id:a.attributes.id,widget_id:h,required:c,exposed:d})},b=b+drupalgap_jqm_page_event_script_code(n)}else console.log("WARNING: theme_taxonomy_term_reference() - unsupported widget type! ("+e+")");return b}catch(p){console.log("theme_taxonomy_term_reference - "+p)}}
function _theme_taxonomy_term_reference_load_items(a){try{taxonomy_term_index({parameters:{vid:a.taxonomy_vocabulary.vid}},{success:function(b){if(0!=b.length){_taxonomy_term_reference_terms[a.element_id]={};var d=$("#"+a.widget_id);if(!a.required){var f=null;a.exposed?(f='<option value="All">- Any -</option>',_taxonomy_term_reference_terms[a.element_id].All="- Any -"):(f='<option value="">- None -</option>',_taxonomy_term_reference_terms[a.element_id][""]="- None -");$(d).append(f)}$.each(b,function(b,
c){var f='<option value="'+c.tid+'">'+c.name+"</option>";$(d).append(f);_taxonomy_term_reference_terms[a.element_id][c.tid]=c.name});$(d).selectmenu("refresh",!0)}}})}catch(b){console.log("_theme_taxonomy_term_reference_load_items - "+b)}}function _theme_taxonomy_term_reference_onchange(a,b){try{$("#"+b).val($(a).val())}catch(c){console.log("_theme_taxonomy_term_reference_onchange - "+c)}}
function taxonomy_views_exposed_filter(a,b,c,d,f){try{c.type="hidden",$.each(f.settings.allowed_values,function(a,b){var e={required:c.required,render_input_element:!1,attributes:{id:c.options.attributes.id},field_info_field:f,field_info_instance:{widget:{type:"options_select"}},exposed:!0};empty(d.value)||(e.value=parseInt(d.value[0]),e.attributes.value=e.value);var m="";empty(c.title)||(m+=theme("form_element_label",{element:c}));m+=theme("taxonomy_term_reference",e);c.children.push({markup:m})})}catch(e){console.log("taxonomy_views_exposed_filter - "+
e)}}var _views_exposed_filter_query=null,_views_exposed_filter_reset=!1,_views_exposed_filter_submit_variables=null;
function views_datasource_get_view_result(a,b){try{-1!=a.indexOf("?")&&(a=a.replace("?","&"));if(b.reset)window.localStorage.removeItem(a);else if(Drupal.settings.cache.views.enabled){var c=window.localStorage.getItem(a);if(c)if(c=JSON.parse(c),"undefined"!==typeof c.expiration&&0!=c.expiration&&time()>c.expiration)window.localStorage.removeItem(a);else if(b.success){b.success(c);return}}Drupal.services.call({endpoint:"",service:"views_datasource",resource:"",method:"GET",path:a,success:function(c){try{if(b.success){c.path=
a;if(Drupal.settings.cache.views.enabled){var d=time()+Drupal.settings.cache.views.expiration;0==Drupal.settings.cache.views.expiration&&(d=0);c.expiration=d;window.localStorage.setItem(a,JSON.stringify(c))}b.success(c)}}catch(g){console.log("views_datasource_get_view_result - success - "+g)}},error:function(a,c,d){try{b.error&&b.error(a,c,d)}catch(h){console.log("views_datasource_get_view_result - error - "+h)}}})}catch(d){console.log("views_datasource_get_view_result - "+d)}}
function views_exposed_form(a,b,c){try{return a.variables=c.variables,$.each(c.filter,function(c,d){var g=null,h=null,g=d.options.expose.identifier,h={id:g,type:d.options.group_info.widget,title:d.options.expose.label,required:d.options.expose.required,options:{attributes:{id:drupalgap_form_get_element_id(g,a.id)}},views_field:c,filter:d,children:[]},k=d.definition.field_name;if(k){var m=drupalgap_field_info_field(k),n=m.module+"_views_exposed_filter";if(!drupalgap_function_exists(n)){dpm("WARNING: views_exposed_form() - "+
n+"() must be created to assemble the "+m.type+" filter used by "+k);return}window[n](a,b,h,d,m)}else if("select"==h.type)list_views_exposed_filter(a,b,h,d,null);else{dpm('WARNING: views_exposed_form() - I do not know how to handle the exposed filter for the "'+c+'" field');dpm(d);return}g&&(a.elements[g]=h)}),a.elements.submit={type:"submit",value:c.exposed_data.submit},c.exposed_data.reset&&_views_exposed_filter_reset&&(a.buttons.reset={title:c.exposed_data.reset,attributes:{id:a.id+"-reset",onclick:"views_exposed_form_reset()"}}),
a}catch(d){console.log("views_exposed_form - "+d)}}
function views_exposed_form_submit(a,b){try{var c="";$.each(b.values,function(a,b){empty(b)||(c+=a+"="+encodeURIComponent(b)+"&")});empty(c)||(c=c.substr(0,c.length-1));if(_views_exposed_filter_query){if(_views_exposed_filter_query==c)return;-1!=a.variables.path.indexOf("&"+_views_exposed_filter_query)&&(a.variables.path=a.variables.path.replace("&"+_views_exposed_filter_query,""))}_views_exposed_filter_query=c;_views_exposed_filter_reset=!0;a.variables.path+="&"+c;a.variables.page=0;_views_exposed_filter_submit_variables=
a.variables;_theme_view(a.variables)}catch(d){console.log("views_exposed_form_submit - "+d)}}function views_exposed_form_reset(){try{_views_exposed_filter_submit_variables.path=_views_exposed_filter_submit_variables.path.replace("&"+_views_exposed_filter_query,""),_views_exposed_filter_submit_variables.page=0,_views_exposed_filter_reset=!1,_views_exposed_filter_query=null,_theme_view(_views_exposed_filter_submit_variables)}catch(a){console.log("views_exposed_form_reset - "+a)}}
function theme_view(a){try{a.attributes.id||(console.log("WARNING: theme_view() - No id specified on attributes! A random id will be generated instead."),a.attributes.id="views-view--"+user_password());in_array(a.attributes.id,drupalgap.views.ids)?$("#"+a.attributes.id)?dpm("WARNING: theme_view() - this id already exists in the DOM: #"+a.attributes.id+" - the view will be rendered into the first container that is located in the DOM - if you are re-using this same view, it is recommended to append a unique identifier (e.g. an entity id) to your views id, that way you can re-use the same view across multiple pages."):
drupalgap.views.ids.splice($.inArray(a.attributes.id,drupalgap.views.ids),1):drupalgap.views.ids.push(a.attributes.id);a.attributes["class"]+="view ";var b="<div "+drupalgap_attributes(a.attributes)+" ></div>",c={page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_view",jqm_page_event_args:JSON.stringify(a)};return b+drupalgap_jqm_page_event_script_code(c)}catch(d){console.log("theme_view - "+d)}}
function _theme_view(a){try{var b=0;a.page&&(b=a.page);var c=$.extend({},{success:function(b){try{$("#"+a.attributes.id).html(b)}catch(c){console.log("_theme_view - success - "+c)}}},a);views_embed_view(a.path+"&page="+b,c)}catch(d){console.log("_theme_view - "+d)}}var _views_embed_view_results=null;
function views_embed_view(a,b){try{views_datasource_get_view_result(a,{success:function(a){try{if(_views_embed_view_results=a,b.success){b.results=a;var c=theme("views_view",b);b.success(c)}}catch(e){console.log("views_embed_view - success - "+e)}},error:function(a,c,e){try{_views_embed_view_results=null,b.error&&b.error(a,c,e)}catch(g){console.log("views_embed_view - error - "+g)}}})}catch(c){console.log("views_embed_view - "+c)}}
function theme_views_view(a){try{var b="",c=_views_embed_view_results;if(!c)return b;a.format||(a.format="unformatted_list");var d=c.view.root,f=c.view.child;a.title&&(b+=theme("header",{text:a.title,attributes:a.title_attributes?a.title_attributes:null}),"unformatted"!=a.format&&(b+=theme("views_spacer",null)));var e="";"undefined"!==typeof c.view.exposed_data&&(e=drupalgap_get_form("views_exposed_form",{exposed_data:c.view.exposed_data,exposed_raw_input:c.view.exposed_raw_input,filter:c.view.filter,
variables:a}));if(0==c.view.count){var g="#"+drupalgap_get_page_id()+" #"+a.attributes.id;$(g).hide();setTimeout(function(){$(g).trigger("create").show("fast")},100);return a.empty_callback&&function_exists(a.empty_callback)?e+(0,window[a.empty_callback])(c.view):b+e}b+=e;a.format||(a.format="unformatted_list");var h=e="",k="",m="",n={};"undefined"!==typeof a.format_attributes&&(n=$.extend(!0,n,a.format_attributes));switch(a.format){case "ul":"undefined"===typeof n["data-role"]&&(n["data-role"]="listview");
e="<ul "+drupalgap_attributes(n)+">";h="</ul>";k="<li>";m="</li>";break;case "ol":"undefined"===typeof n["data-role"]&&(n["data-role"]="listview");e="<ol "+drupalgap_attributes(n)+">";h="</ol>";k="<li>";m="</li>";break;case "table":case "jqm_table":"jqm_table"==a.format&&("undefined"===typeof n["data-role"]&&(n["data-role"]="table"),"undefined"===typeof n["data-mode"]&&(n["data-mode"]="reflow"),console.log("WARNING: theme_views_view() - jqm_table not supported, yet"));e="<table "+drupalgap_attributes(n)+
">";h="</table>";k="<tr>";m="</tr>";break;default:"undefined"===typeof n["class"]&&(n["class"]=""),n["class"]+=" views-rows",e="<div "+drupalgap_attributes(n)+">",h="</div>",m=k=""}var p=""+e;$.each(c[d],function(b,d){var e=d[f];e._position=b;var g="";a.row_callback&&function_exists(a.row_callback)?(row_callback=window[a.row_callback],g=row_callback(c.view,e)):g=JSON.stringify(e);p+=k+g+m});p+=h;d="";c.view.pages&&(d=theme("pager",a));e="top";"undefined"!==typeof a.pager_pos&&(e=a.pager_pos);"top"==
e?(b+=d,empty(d)||(b+=theme("views_spacer",null)),b+=p):"bottom"==e?(b+=p,empty(d)||(b+=theme("views_spacer",null)),b+=d):console.log("WARNING: theme_views_view - unsupported pager_pos ("+e+")");g="#"+drupalgap_get_page_id()+" #"+a.attributes.id;$(g).hide();setTimeout(function(){$(g).trigger("create").show("fast")},100);return b}catch(q){console.log("theme_views_view - "+q)}}function theme_views_spacer(a){return'<h2 class="dg_empty_list_header">&nbsp;</h2>'}
function theme_pager(a){try{var b="",c=a.results.view,d=c.page,f=c.pages,e=c.count,d=c.page;if(0==e)return b;c=[];0!=d&&c.push(theme("pager_previous",a));d!=f-1&&c.push(theme("pager_next",a));if(0<c.length)var g="theme_pager_"+user_password(),b=b+('<div id="'+g+'" data-role="navbar">'+theme("item_list",{items:c})+'</div><script type="text/javascript">$("#'+g+'").navbar();\x3c/script>');return b}catch(h){console.log("theme_pager - "+h)}}
function theme_pager_link(a,b){try{b.attributes||(b.attributes={});b.attributes.href="#";var c=drupalgap_attributes(b.attributes);return"<a onclick='"+_theme_pager_link_onclick(a)+"' "+c+">"+b.text+"</a>"}catch(d){console.log("theme_pager_link - "+d)}}function _theme_pager_link_onclick(a){try{var b=$.extend({},{},a);b.results&&delete b.results;return"_theme_pager_link_click("+JSON.stringify(b)+")"}catch(c){console.log("_theme_pager_link_onclick - "+c)}}
function _theme_pager_link_click(a){try{_theme_view(a)}catch(b){console.log("_theme_pager_link_click - "+b)}}function theme_pager_next(a){try{return a.page=a.results.view.page+1,theme_pager_link(a,{text:"&raquo;",attributes:{"class":"pager_next"}})}catch(b){console.log("theme_pager_next - "+b)}}function theme_pager_previous(a){try{return a.page=a.results.view.page-1,theme_pager_link(a,{text:"&laquo;",attributes:{"class":"pager_previous"}})}catch(b){console.log("theme_pager_previous - "+b)}}
drupalgap.views_datasource={options:{},call:function(a){try{console.log("WARNING: drupalgap.views_datasource has been deprecated! Use views_datasource_get_view_result() instead."),views_datasource_get_view_result(a.path,a)}catch(b){console.log("drupalgap.views_datasource - "+b)}}};
