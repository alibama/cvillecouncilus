<!DOCTYPE html>
<!--[if lt IE 7]> <html class="ie6 ie" lang="en" dir="ltr"> <![endif]-->
<!--[if IE 7]>    <html class="ie7 ie" lang="en" dir="ltr"> <![endif]-->
<!--[if IE 8]>    <html class="ie8 ie" lang="en" dir="ltr"> <![endif]-->
<!--[if IE 9]>    <html class="ie9 ie" lang="en" dir="ltr"> <![endif]-->
<!--[if !IE]> --> <html lang="en" dir="ltr"> <!-- <![endif]-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="https://www.cvillecouncil.us/misc/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="shortlink" href="/node/3879" />
<link rel="canonical" href="/content/build-spam-cannon-using-views-rules-profile2-and-content-taxonomy" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Build a spam cannon using views + rules,  profile2 and content taxonomy | C-ville, Council Us</title>
  <link type="text/css" rel="stylesheet" href="https://www.cvillecouncil.us/sites/default/files/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.cvillecouncil.us/sites/default/files/css/css_mAYj5j4u5QRDj44M39RZxOT3Mu4gxWfsdUMua2w5PS8.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.cvillecouncil.us/sites/default/files/css/css_UZKQHq62HOKE70JDIdMjjfRn1JIC9YV1VXhRL-j6-RM.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.cvillecouncil.us/sites/default/files/css/css_lxL_K-dC7uCEa4CPxO0ObPM9TpAKZDOFHrzsXCnz_wc.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.cvillecouncil.us/sites/default/files/css/css_nTr55mbZYlMSsBXnLjRgu7jXCLkPIwg_iGLiIvrYokQ.css" media="print" />
<link type="text/css" rel="stylesheet" href="https://www.cvillecouncil.us/sites/default/files/css/css_8MkH8MCc1g3JoCY5cgALQplS_LCI1qTAqvVFvqx65K8.css" media="all" />
  <script type="text/javascript" src="https://www.cvillecouncil.us/sites/default/files/js/js_YWHVd5xyXCesOAUqLr7xvfnoMBKLYQU6OIH_tIqjDzI.js"></script>
<script type="text/javascript" src="https://www.cvillecouncil.us/sites/default/files/js/js_99Q18WtwK0tLX-xfRugw2pbXCq3GYkWvcnx1fXLv-ck.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-58453619-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="https://www.cvillecouncil.us/sites/default/files/js/js_GZ7kuSy974uiJPScb40mDYbHesBUMH9qSlSmAalZfpw.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"open_framework","theme_token":"W66OrnzTyI3d71sjVBSYFF0FxQNbhuWPkq9v-6CWXUE","js":{"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.7\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/behavior_weights\/behavior_weights.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"sites\/all\/themes\/open_framework-7.x-2.1\/packages\/bootstrap-2.3.1\/js\/bootstrap.min.js":1,"sites\/all\/themes\/open_framework-7.x-2.1\/js\/open_framework.js":1,"sites\/all\/themes\/open_framework-7.x-2.1\/js\/jquery.placeholder.min.js":1,"sites\/all\/themes\/open_framework-7.x-2.1\/js\/override.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"sites\/all\/modules\/calendar\/css\/calendar_multiday.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/corner\/corner.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"sites\/all\/modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"sites\/all\/modules\/date\/date_repeat_field\/date_repeat_field.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/logintoboggan\/logintoboggan.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"modules\/forum\/forum.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/rate\/rate.css":1,"sites\/all\/themes\/open_framework-7.x-2.1\/packages\/bootstrap-2.3.1\/css\/bootstrap.min.css":1,"sites\/all\/themes\/open_framework-7.x-2.1\/packages\/bootstrap-2.3.1\/css\/bootstrap-responsive.min.css":1,"sites\/all\/themes\/open_framework-7.x-2.1\/packages\/font-awesome-3.2.1\/css\/font-awesome.min.css":1,"sites\/all\/themes\/open_framework-7.x-2.1\/css\/open_framework.css":1,"sites\/all\/themes\/open_framework-7.x-2.1\/css\/open_framework_print.css":1,"sites\/default\/files\/fontyourface\/wysiwyg.css":1,"sites\/default\/files\/fontyourface\/font.css":1,"public:\/\/fontyourface\/local_fonts\/stencil-normal-normal\/stylesheet.css":1,"public:\/\/sweaver\/sweaver_open_framework_1_live.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"}});
//--><!]]>
</script>
  <!--[if IE 7]>
  <link rel="stylesheet" href="/sites/all/themes/open_framework-7.x-2.1/packages/font-awesome-3.2.1/css/font-awesome-ie7.min.css">
  <![endif]-->
  <!-- IE Fix for HTML5 Tags -->
  <!--[if lt IE 9]>
    <script src="/sites/all/themes/open_framework-7.x-2.1/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-3879 node-type-article   content-first    borders roundedcorners"  >
    <a href="#main" class="element-invisible element-focusable">Skip to content</a>
<a href="#main-nav" class="element-invisible element-focusable" data-target=".nav-collapse" data-toggle="collapse">Skip to navigation</a>
<!-- /#skipnav -->
<!-- /#admin-shortcuts -->
<div id="header" class="clearfix header" role="banner">
  <div class="container">
    <div class="row">
      <div class="header-section span12">
                <!-- /#logo -->
                <div id="name-and-slogan">
                    <div id="site-name" class="site-name"><a href="/" title="Home" rel="home">C-ville, Council Us</a></div>
                            </div>
                        <!-- /#name-and-slogan -->
                <!-- /#header-content -->
      </div>
            <!-- /#site-login -->
    </div>
  </div>
</div>
<!-- /#header -->
<div id="main-menu" class="clearfix site-main-menu">
  <div class="container">
    <div class="navbar">
            <div class="navbar-inner">
                                <button aria-label="main menu" name="main menu" title="the main menu" value="main_menu" class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse"> <span class="hidden-btn-label">Main menu<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </span></button>
                <div class="nav-collapse collapse">
          <nav id="main-nav" role="navigation">
                        <ul class="menu nav"><li class="first leaf"><a href="/node/2">Home</a></li>
<li class="leaf"><a href="/blog">Blog</a></li>
<li class="leaf"><a href="/donations" title="">Revenue</a></li>
<li class="leaf"><a href="/expenses">Expenses</a></li>
<li class="leaf"><a href="/issues">Issues</a></li>
<li class="leaf"><a href="/store" title="">Store</a></li>
<li class="leaf"><a href="/contact" title="">Contact</a></li>
<li class="leaf"><a href="/about" title="">Thanks y&#039;all</a></li>
<li class="last leaf"><a href="/maps">Maps</a></li>
</ul> 
            <!-- /#primary-menu -->
                                  </nav>
        </div>
                              </div>
          </div>
  </div>
</div>
<!-- /#main-menu -->
<div id="main" class="clearfix main" role="main">
  <div class="container">
                <div id="main-content" class="row main-content">
            <div id="sidebar-first" class="sidebar span3 site-sidebar-first">
        <div class="row-fluid"><div class="region region-sidebar-first clearfix">
  <div id="block-search-form" class="clearfix block block-search" role="search">       <div class="content"> <form action="/content/build-spam-cannon-using-views-rules-profile2-and-content-taxonomy" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
      <h2 class="element-invisible">Search form</h2>
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." class="input-medium search-query form-text" placeholder="Search this site..." type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input class="btn-search form-submit" alt="Search" type="image" id="edit-submit" name="submit" src="https://www.cvillecouncil.us/sites/all/themes/open_framework-7.x-2.1/images/searchbutton.png" /></div><input type="hidden" name="form_build_id" value="form-IfKdkS7nAjwST56o404_ZvdniIExcnNkWU-wwMFYxwU" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form> </div>
</div>
<div id="block-system-navigation" class="clearfix block block-system block-menu">     <h2>Navigation</h2>
      <div class="content"> <ul class="menu nav"><li class="first leaf"><a href="/calendar-node-field-deadline">Calendar</a></li>
<li class="collapsed"><a href="/forum">Forums</a></li>
<li class="last leaf"><a href="/cart">Shopping cart</a></li>
</ul> </div>
</div>
<div id="block-user-login" class="clearfix block block-user">     <h2>User login</h2>
      <div class="content"> <form action="/content/build-spam-cannon-using-views-rules-profile2-and-content-taxonomy?destination=node/3879" method="post" id="user-login-form" accept-charset="UTF-8"><div><div class="form-item form-type-textfield form-item-name">
  <label for="edit-name">Username or e-mail <span class="form-required" title="This field is required.">*</span></label>
 <input type="text" id="edit-name" name="name" value="" size="15" maxlength="60" class="form-text required" />
</div>
<div class="form-item form-type-password form-item-pass">
  <label for="edit-pass">Password <span class="form-required" title="This field is required.">*</span></label>
 <input type="password" id="edit-pass" name="pass" size="15" maxlength="128" class="form-text required" />
</div>
<div class="item-list"><ul><li class="first"><a href="/user/register" title="Create a new user account.">Create new account</a></li>
<li class="last"><a href="/user/password" title="Request new password via e-mail.">Request new password</a></li>
</ul></div><input type="hidden" name="form_build_id" value="form-xtYRcfjXWU70fk1oa7mVxI9lFD9VwVTyiekSXcHNL6A" />
<input type="hidden" name="form_id" value="user_login_block" />
<div class="form-actions form-wrapper" id="edit-actions--2"><input type="submit" id="edit-submit--2" name="op" value="Log in" class="form-submit" /></div></div></form> </div>
</div>
</div>
 <!-- /.region -->
</div>
      </div>
      <!-- /#sidebar-first -->
            <div id="content" class="mc-content span9">
        <div id="content-wrapper" class="content-wrapper">
          <div id="content-head" class="row-fluid content-head">
                                                <h1 class="title" id="page-title"> Build a spam cannon using views + rules,  profile2 and content taxonomy </h1>
                                                                                  </div>
                                        <div id="content-body" class="row-fluid content-body"> <div class="region region-content clearfix">
  <div id="block-system-main" class="clearfix block block-system">       <div class="content"> <article id="node-3879" class="node node-article clearfix" about="/content/build-spam-cannon-using-views-rules-profile2-and-content-taxonomy" typeof="schema:Blog sioc:Item foaf:Document">      <span property="dc:title" content="Build a spam cannon using views + rules,  profile2 and content taxonomy" class="rdf-meta element-hidden"></span><span property="sioc:num_replies" content="0" datatype="xsd:integer" class="rdf-meta element-hidden"></span>    <div class="submitted"> <span property="dc:date dc:created" content="2015-02-26T12:27:34-05:00" datatype="xsd:dateTime" rel="sioc:has_creator">Submitted by <span class="username" xml:lang="" about="/users/ansondparker" typeof="schema:Person sioc:UserAccount" property="schema:name" datatype="">ansondparker</span> on Thu, 02/26/2015 - 12:27</span> </div>
    <div class="content">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>There are a <a target="_blank" rel="nofollow" href="https://groups.drupal.org/node/15928">boat-load of modules that send notifications</a>.. since I've already got <a target="_blank" rel="nofollow" href="https://www.drupal.org/project/rules">Rules </a>and <a target="_blank" rel="nofollow" href="https://www.drupal.org/project/views">Views</a> turned on, why not use the <a target="_blank" rel="nofollow" href="https://www.drupal.org/project/views_rules">Views &amp; Rules</a> module to do custom notifications, a <a target="_blank" rel="nofollow" href="https://www.drupal.org/project/features">feature is provided</a>...  briefly it works like this<a target="_blank" rel="nofollow" href="https://www.cvillecouncil.us/sites/default/files/styles/medium/public/Screen%20Shot%202015-02-26%20at%2012.08.35%20PM.png"></a><a href="/file/view-rules-notifications-drupal-0"><img alt="view for rules notifications drupal" title="view for rules notifications drupal" style="float: right;" class="media-element file-teaser" typeof="foaf:Image" src="https://www.cvillecouncil.us/sites/default/files/styles/medium/public/Screen%20Shot%202015-02-26%20at%2012.08.35%20PM.png?itok=JXUtkXpm" /></a></p>
<ol><li>Using <a target="_blank" rel="nofollow" href="https://www.drupal.org/project/profile2">profile2</a> add a taxonomy field to a profile</li>
<li>Add the same taxonomy to a content type</li>
<li>When new content is added a rule fires that runs a view - selecting all the users who have listed that taxonomy term in their profile</li>
<li>The rule then fires out emails...   </li>
</ol><p>I really like how simple this notification scheme is, and generally how it re-uses the modules and such that are in place...  so here's how to do it</p>
<p>After installing the modules mentioned above go ahead and create a view such as the one on the right...</p>
<p>set yourself up with a contextual filter.. you'll pick that up from the rule - </p>
<p><a href="/file/contextual-filter-get-data-rule"><img alt="contextual filter to get data from the rule" title="contextual filter to get data from the rule" class="media-element file-teaser" typeof="foaf:Image" src="https://www.cvillecouncil.us/sites/default/files/styles/medium/public/Screen%20Shot%202015-02-26%20at%2011.58.49%20AM.png?itok=cBdt2HYw" /></a></p>
<p><span style="font-size: 13.0080003738403px; line-height: 20.0063037872314px;">Since you're going to be adding a relationship off of a relationship with the taxonomy terms (from profile2 - &gt; to term -&gt; to content)  remember to select distinct or you may get a ton of duplicate content - I usually click the pure distinct too... not entirely certain what it does... but it all seems to work :)  </span></p>
<p><a href="/file/select-distinct"><img alt="select distinct" title="select distinct" style="font-size: 13.0080003738403px; line-height: 20.0063037872314px;" class="media-element file-teaser" typeof="foaf:Image" src="https://www.cvillecouncil.us/sites/default/files/styles/medium/public/Screen%20Shot%202015-02-26%20at%2011.57.23%20AM.png?itok=GMRtJ8Uq" /></a></p>
<p><span style="font-size: 13.0080003738403px; line-height: 20.0063037872314px;">The rule side of this is remarkably simple - take a look at the image... you just add the view loop - your almost done!</span></p>
<p><a href="/file/fuel-rule"><img alt="The fuel for the rule" title="The fuel for the rule" style="font-size: 13.0080003738403px; line-height: 20.0063037872314px;" class="media-element file-teaser" typeof="foaf:Image" src="https://www.cvillecouncil.us/sites/default/files/styles/medium/public/Screen%20Shot%202015-02-26%20at%2012.16.01%20PM.png?itok=7oRnsAq7" /></a></p>
<p><span style="font-size: 13.0080003738403px; line-height: 20.0063037872314px;">all of your fields from the view are available once the view </span></p>
<p><a href="/file/rules-view"><img alt="Rules for the view" title="Rules for the view" style="font-size: 13.0080003738403px; line-height: 20.0063037872314px;" class="media-element file-teaser" typeof="foaf:Image" src="https://www.cvillecouncil.us/sites/default/files/styles/medium/public/Screen%20Shot%202015-02-26%20at%2012.17.43%20PM.png?itok=bTXKHdJt" /></a> </p>
<p>then you just add a "send e-mail" link and that's it...  this is how I'm handling notifications for folks, and also how I'm taking care of the <a target="_blank" rel="nofollow" href="https://github.com/18F/api-standards#notifications-of-updates">18f api notifications requirement</a> :)</p>
<p>please ask any questions in the comments below</p>
</div></div></div><div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-above"><div class="field-label">Tags:&nbsp;</div><div class="field-items"><div class="field-item even" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/notifications" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">notifications</a></div><div class="field-item odd" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/drupal-7" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">drupal 7</a></div><div class="field-item even" rel="dc:subject"><a href="/tags/drupal-development" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Drupal Development</a></div><div class="field-item odd" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/18f" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">18f</a></div><div class="field-item even" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/features" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">features</a></div><div class="field-item odd" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/charlottesville-city-council" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">charlottesville city council</a></div><div class="field-item even" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/views-rules" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">views rules</a></div><div class="field-item odd" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/profile2" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">profile2</a></div><div class="field-item even" rel="dc:subject"><a href="/https%3A/www.cvillecouncil.us/tags/taxonomy" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">taxonomy</a></div></div></div><div class="field field-name-field-files field-type-file field-label-above"><div class="field-label">Files:&nbsp;</div><div class="field-items"><div class="field-item even" rel="" resource="https://www.cvillecouncil.us/sites/default/files/notifications_views_rules_taxonomy_terms-7.x-1.1_0.tar"><span class="file"><img class="file-icon" alt="" title="application/x-tar" src="/modules/file/icons/package-x-generic.png" /> <a href="https://www.cvillecouncil.us/sites/default/files/notifications_views_rules_taxonomy_terms-7.x-1.1_0.tar" type="application/x-tar; length=93696">notifications_views_rules_taxonomy_terms-7.x-1.1.tar</a></span></div></div></div><span property="dc:title" content="Build a spam cannon using views + rules,  profile2 and content taxonomy" class="rdf-meta element-hidden"></span>  </div>
  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="/user/login?destination=node/3879%23comment-form">Log in</a> or <a href="/user/register?destination=node/3879%23comment-form">register</a> to post comments</span></li>
</ul>  </article> </div>
</div></div>
 <!-- /.region -->
  </div>
                                                                                                  </div>
        <!-- /#content-wrap --> 
      </div>
      <!-- /#content -->
          </div>
          </div>
</div>
<!-- /#main, /#main-wrapper -->
<div id="footer" class="clearfix site-footer" role="contentinfo">
  <div class="container">
    <div id="footer-content" class="row-fluid footer-content"> <div class="region region-footer clearfix">
  <div id="block-system-powered-by" class="clearfix block block-system">       <div class="content"> <span>Powered by <a href="https://www.drupal.org">Drupal</a></span> </div>
</div>
</div>
 <!-- /.region -->
 </div>
  </div>
</div>
<!-- /#footer -->
  
<div id="corner-2" class="corner corner-top-right corner-absolute pngfix">
  <a href="https://github.com/alibama/cvillecouncilus" title="Clone me on Github" target="_blank"><img typeof="foaf:Image" src="https://www.cvillecouncil.us/sites/all/modules/corner/images/gitsome.png" alt="gitsome.png" title="Clone me on Github" /></a></div></body>

</html>

<!-- Page cached by Boost @ 2015-02-28 10:24:24, expires @ 2015-02-28 11:24:24, lifetime 1 hour -->